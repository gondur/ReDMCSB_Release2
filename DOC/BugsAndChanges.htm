<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Bugs and Changes</title>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<link type="text/css" rel="stylesheet" media="all" href="style.css" />
</head>
<body>
<h1><a name="Overview">Bugs and Changes</a></h1>
<p>This document contains the list of all known bugs and the list of all changes between game versions (some of which are bug fixes). Each one is identified by a unique name containing two numbers:</p>
<ul><li>A number between 0 and 8 identifying the game version where the bug or change was introduced:
<ul><li>0: DM for Atari ST 1.0a EN</li>
<li>1: DM for Atari ST 1.0b EN</li>
<li>2: DM for Atari ST 1.1 EN</li>
<li>3: DM for Atari ST 1.2 EN</li>
<li>4: DM for Atari ST 1.2 GE</li>
<li>5: DM for Atari ST 1.3a FR</li>
<li>6: DM for Atari ST 1.3b FR</li>
<li>7: CSB for Atari ST 2.0 EN</li>
<li>8: CSB for Atari ST 2.1 EN</li></ul></li>
<li>An unique increment value.</li>
<li>Change identifiers also contain one category identifier:
<ul><li>FIX: changes to fix bugs.</li>
<li>OPTIMIZATION: changes without any significant effect on the behavior of the game. Such changes may improve performance, minimize machine code size or lead to cleaner source code.</li>
<li>LOCALIZATION: changes required by the translation of the game to another language.</li>
<li>IMPROVEMENT: all changes that are not in other categories. Most of these changes add new features or tweak the behavior of the game.</li></ul></li></ul>
<p>For example, CHANGE3_07_FIX identifies the 7th change introduced in DM for Atari ST 1.2 EN.</p>
<p>For more details, please refer to the source code by searching for the identifier of the bug or change. Many text editors allow searching for a keyword like 'BUG0_00' or 'CHANGE1_00_OPTIMIZATION' in multiple files, my recommendation is <a href="http://notepad-plus-plus.org/">Notepad++</a>.</p>
<ul><li><a href="#Bugs">Bugs (81)</a>
<ul><li><a href="#Bugs0">Bugs introduced in DM for Atari ST 1.0a EN (77)</a></li>
<li><a href="#Bugs2">Bugs introduced in DM for Atari ST 1.1 EN (1)</a></li>
<li><a href="#Bugs5">Bugs introduced in DM for Atari ST 1.3a FR (1)</a></li>
<li><a href="#Bugs7">Bugs introduced in CSB for Atari ST 2.0 EN (2)</a></li></ul></li>
<li><a href="#Changes">Changes (108)</a>
<ul><li><a href="#Changes1">Changes introduced in DM for Atari ST 1.0b EN (3)</a></li>
<li><a href="#Changes2">Changes introduced in DM for Atari ST 1.1 EN (21)</a></li>
<li><a href="#Changes3">Changes introduced in DM for Atari ST 1.2 EN (21)</a></li>
<li><a href="#Changes4">Changes introduced in DM for Atari ST 1.2 GE (1)</a></li>
<li><a href="#Changes5">Changes introduced in DM for Atari ST 1.3a FR (7)</a></li>
<li><a href="#Changes6">Changes introduced in DM for Atari ST 1.3b FR (1)</a></li>
<li><a href="#Changes7">Changes introduced in CSB for Atari ST 2.0 EN (40)</a></li>
<li><a href="#Changes8">Changes introduced in CSB for Atari ST 2.1 EN (14)</a></li></ul></li></ul>
<h1><a name="Bugs">Bugs (81)</a></h1>
<h2><a name="Bugs0">Bugs introduced in DM for Atari ST 1.0a EN (77)</a></h2>
<h3><a name="BUG0_00">BUG0_00</a></h3>
<dl><dt>Symptom</dt>
<dd>No perceptible symptom while playing the game. These are not really bugs but rather useless statements in the source code that could be removed without changing the program behavior.</dd>
<dt>Cause</dt>
<dd>Useless code (variables, statements, fields, functions and parameters).</dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>DEFS.H, CHAMPION.C, COMMAND.C, COPYPROT.C, DIALOG.C, DUNVIEW.C, GROUP1.C, INVNTORY.C, LZW.C, MAIN.C, MEMINIT.C, MEMORY.C, MENUS.C, MOUSE.C, MOVE.C, PROJEXPL.C, SAVEUTIL.C, SENSOR.C, SOUND.C, STARTND2.C, TEXT.C, TIMELINE.C</dd>
<dt>Resolution</dt>
<dd>Only partly fixed in some versions (see <a href="#CHANGE2_06_FIX">CHANGE2_06_FIX</a>, <a href="#CHANGE3_19_FIX">CHANGE3_19_FIX</a> <a href="#CHANGE5_01_FIX">CHANGE5_01_FIX</a>, <a href="#CHANGE7_14_FIX">CHANGE7_14_FIX</a>). Useless code removed.</dd></dl>
<h3><a name="BUG0_01">BUG0_01</a></h3>
<dl><dt>Symptom</dt>
<dd>No perceptible symptom while playing the game. These are only coding errors without consequences, hence only visible in the source code.</dd>
<dt>Cause</dt>
<dd>Multiple causes including:
<ul><li>Undefined return value.</li>
<li>Function call with wrong number of parameters.</li>
<li>Out of bounds array index.</li>
<li>String litteral used instead of variable.</li>
<li>Wrong return value.</li>
<li>Use of uninitialized variable.</li>
<li>Write to invalid memory addresses (when drawing the mouse pointer at the bottom of the screen)</li></ul></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, COMMAND.C, DUNGEON.C, DUNVIEW.C, EXPAND.C, INVNTORY.C, MENUS.C, MOUSE.C, MOVE.C, OBJECT.C, TEXT.C, TIMELINE.C, GRA21DM.S, GRA21CSB.S, GRAPH538.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_02">BUG0_02</a></h3>
<dl><dt>Symptom</dt>
<dd>After playing a single game for hundreds of hours (in one row or across multiple save/load cycles) the game starts to behave strangely and then hangs.</dd>
<dt>Cause</dt>
<dd>Even though the game time is stored in a 32 bit value, event times in the timeline are stored on 24 bits so the maximum possible time value is 2^24 - 1 = 16777215 (around 850 to 1000 hours of actual play time). Issues occur because new events scheduled to occur in the future are actually scheduled in the past and then expire immediately. For example, if you use the 'Light' action of the Yew Staff or Sceptre Of Lyf when the game time is 16776500 then an event to remove the light will be scheduled at (16775000 + 2500) Mod 2^24 = 284 and will thus expire immediately so that the light will only be visible for a very short moment. When the game time reaches 16777200 (the largest multiple of 300 that is smaller than the maximum value of 16777216), the time of the next watchdog event is set to (16777200 + 300) Mod 2^24 = 284 and thus expires immediately. The timeline processing then enters an infinite loop where it constantly processes the same watchdog event, causing the game to hang.</dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>MAIN.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_03">BUG0_03</a></h3>
<dl><dt>Symptom</dt>
<dd>Graphical glitch. When the processor is under heavy load, a few lines at the top of the dungeon view may be drawn on screen with the wrong color palette. This is only visible for a very short amount of time and disappears on the next vertical scan.</dd>
<dt>Cause</dt>
<dd>If a vertical blank exception occurs before the previous vertical blank exception handler has completed execution then it is ignored. As the game implements palette switching to draw the dungeon view in the vertical blank exception handler, the appropriate palette is not configured at the right time and causes the top of the dungeon view to use the same color palette as the top of the screen. This is only visible when the palette used to draw the dungeon is not the same as the one used to draw the rest of the screen, which is when the light level in the dungeon is not at its maximum. The issue occurs when the processor is under heavy load because many other interrupts occur with a higher priority level than the vertical blank interrupt, such as sound and mouse processing.<br/>
How to reproduce:
<ol><li>You need low light conditions in the dungeon: wait until all 'Torch' and 'Light' spells expire and remove any torches from champion hands. Also do not stay on the initial dungeon map where the champion portraits are available as light is always maximum there.</li>
<li>Continuously bump into walls by using the arrows on the keyboard so that a sound is played while also moving the mouse very quickly around the screen. The graphical glitch should be visible from time to time.<br/>
<img src="IMAGES/BUG0_03.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR</dd>
<dt>Affected files</dt>
<dd>MAIN.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE7_01_FIX">CHANGE7_01_FIX</a>). The vertical blank handler is changed so that no vertical blank interrupts can be ignored and the palette switching code always starts right on time.</dd></dl>
<h3><a name="BUG0_04">BUG0_04</a></h3>
<dl><dt>Symptom</dt>
<dd>Some creatures may be drawn with unexpected colors in Dungeon Master.</dd>
<dt>Cause</dt>
<dd>In the color palettes used to draw the dungeon view, two colors (9 and 10) are only used by creature graphics and each creature type can specify replacement colors to use instead of the default colors. Creature types that do not use these colors can specify that no replacement is needed. Each map in the dungeon has an associated list of allowed creature types. If multiple creatures with conflicting color replacements are allowed on the same map then each replacement color is defined by the creature type that appears the last in the list of allowed creature types. There are no such conflicts in Dungeon Master.<br/>
However, the side bitmap of 'Giant Wasp' uses color 10 but no replacement is specified. In the game, the actual color used is not the same on all maps where they are present: on map 3 the color is the one defined by 'Magenta Worm', on map 5 it is the color defined by 'Wizard Eye' and on map 10 it is the color defined by 'Water Elemental'.<br/>
All bitmaps for 'Swamp Slime' use both colors 9 and 10 but replacement is only specified for color 10. On the map where this creature is used, there are no other creatures defining color 9 so the default color is used which is appropriate. However, this color should be explicitly specified.<br/>
The front, side and attack bitmaps for 'Lord Chaos' use color 9 but no replacement is specified. On the map where this creature is used, the colors defined by the Demon are used, which are also appropriate for Lord Chaos. However, these colors should be explicitly specified.<br/>
How to reproduce:
<ol><li>For 'Giant Wasp', in Dungeon Master go to maps 3, 5 and 10 to see them from the side: the color of the abdomen below the wings is different on each map:<br/>
<img src="IMAGES/BUG0_04_1.png" alt=""/> <img src="IMAGES/BUG0_04_2.png" alt=""/> <img src="IMAGES/BUG0_04_3.png" alt=""/></li>
<li>For 'Swamp Slime' and 'Lord Chaos', create a custom dungeon, add a creature that replaces colors 9 and 10 and then add one of these creatures in the list of allowed creatures. When playing the game, the colors of the first creature will be used instead of the expected colors.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_05">BUG0_05</a></h3>
<dl><dt>Symptom</dt>
<dd>A champion portrait sensor on a wall square is visible on all sides of the wall. If there is another sensor with a wall ornament on one side of the wall then the champion portrait is drawn over that wall ornament.
This issue only affects custom dungeons. It does not exist in the original dungeons where all walls with portraits have only one visible side and no other sensors with wall ornaments.</dd>
<dt>Cause</dt>
<dd>Champion portraits are managed as a special case when drawing wall ornaments. They are always drawn after any other ornament and the sensor cell on the wall is ignored.<br/>
How to reproduce:
<ol><li>Create a custom dungeon and place a champion portrait sensor on a wall that has more than one side visible.</li>
<li>Add another sensor with a wall ornament on one of the visible sides of the wall.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_06">BUG0_06</a></h3>
<dl><dt>Symptom</dt>
<dd>Graphical glitch when drawing projectiles or explosions.</dd>
<dt>Cause</dt>
<dd>If a projectile or explosion bitmap is cropped because it is only partly visible on the left side of the viewport and the bitmap is flipped horizontally then a wrong part of the bitmap is drawn on screen. This issue does not apply to object bitmaps and to projectiles drawn with object bitmaps because those are only flipped horizontally when being drawn in the right half of the dungeon view.<br/>
How to reproduce:
<ol><li>In Dungeon Master go to map 0 at coordinates 6,16 and face west.</li>
<li>Move backward 2 or 3 steps.</li>
<li>Cast a low power Fireball spell and immediately move one step to the right.</li>
<li>When the projectile impacts the wall, the Fireball explosion may be drawn incorrectly, here are some examples where the bitmap looks cropped on the right side:<br/>
<img src="IMAGES/BUG0_06_1.png" alt=""/> <img src="IMAGES/BUG0_06_2.png" alt=""/><br/>
The same issue occurs with large bitmaps but cannot be noticed easily.</li>
<li>Examples with a 'Sword' projectile and a 'Throwing Star' projectile going from left to right (in both cases the right end is incorrectly cropped):<br/>
<img src="IMAGES/BUG0_06_3.png" alt=""/> <img src="IMAGES/BUG0_06_4.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_07">BUG0_07</a></h3>
<dl><dt>Symptom</dt>
<dd>Graphical glitch when drawing explosions.</dd>
<dt>Cause</dt>
<dd>If an explosion bitmap is cropped because it is only partly visible on the left side of the viewport and the bitmap is not flipped horizontally then a variable is not set before being used. Its previous value (defined while drawing something else) is used and may cause an incorrect bitmap to be drawn.<br/>
How to reproduce:<br/>
<ol><li>In Dungeon Master go to map 0 at coordinates 6,16 and face west.</li>
<li>Move backward 2 or 3 steps.</li>
<li>Cast a Fireball spell and immediately move one step to the right.</li>
<li>When the projectile impacts the wall, the Fireball explosion may be drawn incorrectly, here are some examples:<br/>
<img src="IMAGES/BUG0_07_1.png" alt=""/> <img src="IMAGES/BUG0_07_2.png" alt=""/> <img src="IMAGES/BUG0_07_3.png" alt=""/> <img src="IMAGES/BUG0_07_4.png" alt=""/> <img src="IMAGES/BUG0_07_5.png" alt=""/></li>
<li>You may need to cast multiple Fireball spells of varying power before seeing the issue.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE2_02_FIX">CHANGE2_02_FIX</a>) The variable is always set so that explosions are drawn correctly.</dd></dl>
<h3><a name="BUG0_08">BUG0_08</a></h3>
<dl><dt>Symptom</dt>
<dd>Objects disappear in the dungeon and data is corrupted in memory.</dd>
<dt>Cause</dt>
<dd>The game manages an array of limited size containing the first thing on each square where there is at least one thing. There is no check to stop adding things to this array when it is full and this causes data corruptions in memory. With the original Dungeon Master and Chaos Strikes back dungeons the array is large enough so that most players will not get into trouble, however it is still possible to fill it by placing one thing on as many squares as possible in the dungeon. The number of free slots to store first square things is 676 in DM for Atari ST 1.0a EN, 678 in DM for Atari ST 1.0b EN, 679 in DM for Atari ST 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR and 1.3b FR, 690 in CSB for Atari ST 2.0 EN and 2.1 EN (each dungeon contains a number of free slots and the game adds 300 more when loading the dungeon).<br/>
How to reproduce:
<ol><li>Collect all objects present in the dungeon and spread them on as many squares as possible. Do not place objects on squares where there is already a thing (doors, teleporters, floor sensors).</li>
<li>Do not use Ven Potions and Ful Potions because there is no way to create potions in the game.</li>
<li>Kill lots of groups so they drop new objects and place each object on a distinct square in the dungeon. You must repeat this operation with various types of creatures in order to create objects of each type (weapon, armor, junk) and until the groups do not drop objects anymore (meaning the maximum possible number of objects of each kind is reached).</li>
<li>Generate as many groups as possible (and do not kill them) on multiple maps in order to maximize their total number in the dungeon.</li>
<li>When there are too many squares with things on them, the things on the last squares with at least one thing in the dungeon start to disappear.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>DUNGEON.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_09">BUG0_09</a></h3>
<dl><dt>Symptom</dt>
<dd>The game may trigger a sensor and cause an undesired effect when discarding a thing from a square.</dd>
<dt>Cause</dt>
<dd>When the game needs to create a new thing but has run out of storage for the corresponding thing type (for example when creating a Screamer Slice after a Screamer is killed) it will try to remove another thing of the same type elsewhere in the dungeon (except things that are explicitly marked as non discardable). If the square where the thing is removed contains a sensor, it may be triggered and cause an undesired effect. For example, discarding a Screamer Slice placed by the player on a pressure plate on the floor may close a door or open a pit which may block the party.<br/>
This issue is hard to reproduce because of all the conditions to meet.</dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR</dd>
<dt>Affected files</dt>
<dd>DUNGEON.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE7_17_FIX">CHANGE7_17_FIX</a>) Squares with enabled sensors are ignored when searching for a thing to discard.</dd></dl>
<h3><a name="BUG0_10">BUG0_10</a></h3>
<dl><dt>Symptom</dt>
<dd>No perceptible symptom when playing the game. Coding error without consequence.</dd>
<dt>Cause</dt>
<dd>The game reserves a pool of 3 things to make sure it can create 'Bones' objects for dead champions in the party. When the game creates a thing for a dead champion's bones then Bit 15 is set in the requested thing type to indicate that the pool of reserved things can be used. This bit is not cleared before using the thing type as an array index. No consequence because the machine code generated by the Megamax C compiler left shifts the 16 bits value by 1 bit and then keeps the least significant 16 bits, effectively truncating the original and unwanted bit 15. With other compilers or other platforms this may cause an out of bounds array index issue.</dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR</dd>
<dt>Affected files</dt>
<dd>DUNGEON.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE7_18_FIX">CHANGE7_18_FIX</a>) Clear bit 15 to get the actual thing type before using the value.</dd></dl>
<h3><a name="BUG0_11">BUG0_11</a></h3>
<dl><dt>Symptom</dt>
<dd>Data corruption in memory.</dd>
<dt>Cause</dt>
<dd>Each group located on the same map as the party has additional associated data but there is only provision for 60 instances. If there are more groups at the same time then some of them do not get their instance and when the game accesses this information it will corrupt other data in memory (either the instance of another group, parts of the timeline or events). This situation cannot occur in the original Dungeon Master and Chaos Strikes Back dungeons for the following reasons (but it may occur in custom dungeons if they are not designed carefully): there is no map with already more than 60 groups in the original dungeons and none of the following 3 possible ways to move a group into a map can increase the number of instances above the maximum of 60:
<ul><li>A group generator sensor is triggered: the game never generates a group on the party map if there are less than 5 instances available. This limits the actual number of groups on a map to 55 in most cases.</li>
<li>A group falls through a pit from the map above (the creature type must be allowed on the target map): a group will never willingly move to an open pit square. It may move to a closed pit square and fall if the pit is then open (either automatically or triggered by the party on the map below). There are no such pits in the original dungeons.</li>
<li>A group is teleported from another map (the creature type must be allowed on the target map): in the original dungeons, all teleporters whose scope include groups and target another map are either inaccessible to groups or the groups are not allowed on the target map. The only exception is for some Gigglers in the Chaos Strikes Back dungeon but there are not enough to use the 5 reserved instances.</li></ul>
How to reproduce:
<ol><li>Create a custom dungeon.</li>
<li>Place more than 60 groups on the same map.</li>
<li>Alternatively, place teleporters and/or blinking pits that can move groups to a target map where there are already many groups. The creature type must be allowed on the target map. You can also place a group generator sensor on the source map to create up to 55 groups on the map.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_12">BUG0_12</a></h3>
<dl><dt>Symptom</dt>
<dd>An object is cloned and appears at two different locations in the dungeon and/or inventory. The game may crash when interacting with this object.</dd>
<dt>Cause</dt>
<dd>If a Giggler with no possessions steals an object that was previously in a chest and was not the last object in the chest then the objects that followed it are cloned. In the chest, the object is part of a linked list of objects that is not reset when the object is removed from the chest and placed in the inventory (but not in the dungeon), nor when it is stolen and added as the first Giggler possession. If the Giggler already has a possession before stealing the object then this does not create a cloned object.<br/>
How to reproduce:
<ol><li>Open a chest containing several objects.</li>
<li>Take one object that is not the last object in the chest and place it in the ready hand.</li>
<li>Face a Giggler until it steals the object from the ready hand. If this is the first object that the Giggler steals, then he actually steals the object and the objects that followed it in the chest, which are now cloned: they are referenced both in the Chest and in the Giggler possessions.</li>
<li>Kill the Giggler. The stolen object and the cloned objects are dropped on the floor. Cloned objects may crash the game and create other undesired effects.</li>
<li>Place additional objects on the floor on top of the cloned objects. They will be linked to these objects which are also in the chest, which can result to a chest containing more than 8 objects. Open the inventory of a champion and place the chest in the action hand. Before version CSB for Atari ST 2.1 EN, this will cause graphical glitches and corrupt some memory as the game tries to display the additional objects:<br/>
<img src="IMAGES/BUG0_12.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd>
<dt>Resolution</dt>
<dd>Improperly fixed in CSB for Atari ST 2.1 EN, never fully fixed. The developers were aware of a cloning issue, but it looks like they thought it was related to opening an already open chest or closing an already closed chest so they became paranoid regarding chest management code and made changes that actually have no useful effect (see <a href="#CHANGE8_09_FIX">CHANGE8_09_FIX</a>) and even reintroduced <a href="#BUG0_48">BUG0_48</a> that was fixed previously in CSB for Atari ST 2.0 EN (see <a href="#CHANGE7_27_FIX">CHANGE7_27_FIX</a>). However, although the actual bug itself was not fixed, changes were made to fix some of its consequences:
<ul><li>(see <a href="#CHANGE8_09_FIX">CHANGE8_09_FIX</a>) Make sure the chest is always closed in several cases and that things are erased from chest slots when the chest is closed.</li>
<li>(see <a href="#CHANGE8_08_FIX">CHANGE8_08_FIX</a>) Make sure that no more than the first 8 objects in a chest are drawn.</li>
<li>(see <a href="#CHANGE8_12_FIX">CHANGE8_12_FIX</a>) New function (in SAVEUTIL.C) called right after loading a saved game (in STARTND2.C) to clean up cloned things.</li></ul></dd></dl>
<h3><a name="BUG0_13">BUG0_13</a></h3>
<dl><dt>Symptom</dt>
<dd>The game may crash when Lord Order or Grey Lord cast spells. This cannot happen with the original dungeons as they do not contain any groups of these types.</dd>
<dt>Cause</dt>
<dd>Lord Order and Grey Lord creatures can cast spells (attack range > 1) but no projectile type is defined for them in the code. If these creatures are present in a dungeon they will cast projectiles containing undefined things because the variable is not initialized.<br/>
How to reproduce:
<ol><li>Create a custom dungeon and place a 'Lord Order' or 'Grey Lord' group.</li>
<li>When playing the game, move close to the group. It will cast random projectiles to the party and this may crash the game.</li></ol></dd>
<dt>Affected versions</dt>
<dd>GROUP1.C</dd>
<dt>Affected files</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_14">BUG0_14</a></h3>
<dl><dt>Symptom</dt>
<dd>While life is frozen, creature reaction events are not ignored as they should. They accumulate and can saturate the timeline.</dd>
<dt>Cause</dt>
<dd>Creature reactions happen after seeing another creature in the group die, being hit by a projectile or a closing door and attacked or bumped into by the party. Each reaction creates an additional event in the timeline and these events are not removed from the timeline while life is frozen by using a Magical Box (except for Lord Chaos which is immune). When events are exhausted, new events are not added to the timeline which can cause many issues (see <a href="#BUG0_18">BUG0_18</a>).<br/>
How to reproduce:
<ol><li>Collect as many Magical Box (Green) as possible.</li>
<li>Face a creature and use one Magical Box to Freeze Life.</li>
<li>Keep bumping into the creature and periodically use other Magical Boxes to keep life frozen. Each time you bump into the creature, an additional reaction event is added to the timeline.</li>
<li>If the timeline is full then new events are not created anymore. See <a href="#BUG0_18">BUG0_18</a> for possible consequences.
Note: the maximum number of events in the timeline is 463 (in DM for Atari ST 1.0a EN and 1.0b EN) or 467 (in DM for Atari ST 1.1 EN).</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE3_04_FIX">CHANGE3_04_FIX</a>) Code moved so that creature reaction events are ignored if life is frozen.</dd></dl>
<h3><a name="BUG0_15">BUG0_15</a></h3>
<dl><dt>Symptom</dt>
<dd>The game hangs when you close a door on Lord Chaos.</dd>
<dt>Cause</dt>
<dd>A condition is missing in the code to manage creatures and this may create an infinite loop between two parts in the code.<br/>
How to reproduce:
<ol><li>Attract Lord Chaos on a door square.</li>
<li>Close the door.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE2_03_FIX">CHANGE2_03_FIX</a>) Condition added to prevent infinite loop.</dd></dl>
<h3><a name="BUG0_16">BUG0_16</a></h3>
<dl><dt>Symptom</dt>
<dd>An object disappears when it is thrown or shot by a champion or launched by a projectile launcher sensor. A spell cast by a champion or a creature is ignored.</dd>
<dt>Cause</dt>
<dd>If the game cannot create a projectile thing because it has run out of such things (60 maximum) then the object being thrown/shot/launched is orphaned. If the game has run out of projectile things it will try to remove a projectile from elsewhere in the dungeon, except in an area of 11x11 squares centered around the party (to make sure the player cannot actually see the thing disappear on screen). The issue does not occur in the original Dungeon Master and Chaos Strikes Back dungeons.<br/>
How to reproduce:
<ol><li>Create a custom dungeon.</li>
<li>Create a loop with 4 teleporters that only turn things in-place so that the projectiles will never impact on a wall and will perpetually move around.</li>
<li>Next to one of the teleporters, place a projectile launcher sensor. Place another wall sensor that the party can use to trigger the projectile launcher.</li>
<li>Make sure the whole system fits in an area of 11x11 squares around the party.</li>
<li>Trigger the wall sensor enough times in order to create 60 projectiles. The game will slow down considerably.</li>
<li>Throw an object. No projectile is created and the object disappears.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN</dd>
<dt>Affected files</dt>
<dd>PROJEXPL.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.1 EN (see <a href="#CHANGE8_00_FIX">CHANGE8_00_FIX</a>) Place object on the floor if the projectile cannot be created.</dd></dl>
<h3><a name="BUG0_17">BUG0_17</a></h3>
<dl><dt>Symptom</dt>
<dd>The game crashes after the Fuse action is performed while looking at a wall on a map boundary.</dd>
<dt>Cause</dt>
<dd>An explosion thing is created on the square in front of the party but there is no check to ensure the square coordinates are in the map bounds. This corrupts a memory location and leads to a game crash.<br/>
How to reproduce:
<ol><li>Move to any square that is on a map boundary and face the direction of the map boundary. For example, in Dungeon Master go to map 13 at coordinates 46, 32 and face North.</li>
<li>Use the Fuse action of the Firestaff.</li>
<li>Turn around and the game crashes.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE</dd>
<dt>Affected files</dt>
<dd>GROUP2.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE5_02_FIX">CHANGE5_02_FIX</a>) The Fuse action is aborted if the specified coordinates are outside the map bounds.</dd></dl>
<h3><a name="BUG0_18">BUG0_18</a></h3>
<dl><dt>Symptom</dt>
<dd>A projectile stays immobile in the air, an explosion remains forever on a square, a spell effect stays active forever (like Light, Shields, Footprints), a champion action icon remains disabled forever.</dd>
<dt>Cause</dt>
<dd>When events are exhausted and the timeline is full, new events are not added to the timeline which can cause various issues.<br/>
How to reproduce: See <a href="#BUG0_14">BUG0_14</a>.</dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE3_05_FIX">CHANGE3_05_FIX</a>) The game stops with message 'SYSTEM ERROR 45' instead of not adding an event to the timeline.</dd></dl>
<h3><a name="BUG0_19">BUG0_19</a></h3>
<dl><dt>Symptom</dt>
<dd>The game crashes when an object launcher sensor is triggered.</dd>
<dt>Cause</dt>
<dd>If a launcher sensor that launches objects on its square is triggered when there are no more objects to launch then the game may crash trying to launch an invalid thing. In the original Dungeon Master and Chaos Strikes Back dungeons, this bug is not possible because the number of times that these sensors are triggered is always controlled to be equal to the number of available objects (with a countdown sensor or a number of once only sensors).<br/>
How to reproduce:
<ol><li>Create a custom dungeon and place an object launcher sensor in the dungeon but no object on the sensor square.</li>
<li>Play the game and trigger the object launcher.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_20">BUG0_20</a></h3>
<dl><dt>Symptom</dt>
<dd>Game crash when a launcher sensor is triggered.</dd>
<dt>Cause</dt>
<dd>The game crashes if the launcher sensor is on a map boundary and shoots in a direction outside the map. There are no such sensors in the original Dungeon Master and Chaos Strikes Back dungeons.<br/>
How to reproduce:
<ol><li>Create a custom dungeon and place a launcher sensor in the dungeon on a map boundary and that shoots in the direction outside the map.</li>
<li>Play the game and trigger the launcher.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_21">BUG0_21</a></h3>
<dl><dt>Symptom</dt>
<dd>Projectiles created by launcher sensors never run out of kinetic energy and move until they impact something.</dd>
<dt>Cause</dt>
<dd>Projectile launcher sensors have a step energy value defining how much kinetic energy is consumed with each step of movement of the projectiles they create. This value is ignored and 0 is always used so that such projectiles always move until they impact something (wall, creature or party).<br/>
How to reproduce:
<ol><li>In Chaos Strikes Back, go to map 1 at coordinates 17,28.</li>
<li>Press the switch on the south wall to trigger the double lightning bolt launcher sensor located at coordinates 17,17. The values defined in this sensor are set so that the projectiles should stop one square before impacting the wall on the south end of the corridor.</li>
<li>Move to the square at coordinates 16,28 and face east.</li>
<li>In CSB for Atari ST 2.0 EN the lighning bolt projectiles move until they impact the wall with the switch. In CSB for Atari ST 2.1 EN the lighning bolt projectiles stop their movement and disappear one square before the wall with the switch, causing no explosion as there is no impact.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.1 EN (see <a href="#CHANGE8_01_FIX">CHANGE8_01_FIX</a>) Projectiles created by launcher sensors use the step energy value stored in the sensor instead of 0.</dd></dl>
<h3><a name="BUG0_22">BUG0_22</a></h3>
<dl><dt>Symptom</dt>
<dd>When a teleporter or pit opens, the game hangs or some things are not moved correctly.</dd>
<dt>Cause</dt>
<dd>The program enters an infinite loop if there are at least two things on a closed teleporter or closed pit square and these things end up on the same square when the teleporter or pit opens. This occurs in these cases:
<ul><li>On a teleporter square targetting itself if there are at least two things on the square when the teleporter is opened.</li>
<li>On a pit square if there are at least two things levitating over the pit (two projectiles or one group and one projectile) when the pit is opened.</li></ul>
Some things are not moved correctly if the list of things on the square contains a group followed by a projectile that impacts the group and then other things. When the group is processed, the projectile is removed from the list of things on the square, which breaks the loop and the next things in the list are not processed.<br/>
How to reproduce:
<ol><li>In Dungeon Master, go to map 7 at coordinates 28,13.</li>
<li>Press the button to open the wall at coordinates 29,12, revealing a second button that controls the teleporter at coordinates 29,13.</li>
<li>Place two objects on the teleporter square at coordinates 29,13.</li>
<li>Go to coordinates 29,12 and press the button. The teleporter is closed.</li>
<li>Press the button a second time. The teleporter is opened and the game hangs.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE7_22_FIX">CHANGE7_22_FIX</a>) If a group is on the square it is processed before all the other things on the square so that the removal of projectiles impacting the group or the removal of the group itself if killed do not break the processing of other things on the square. The loop was modified so that each thing on the square is processed only once, even if it ends up on the same square.</dd></dl>
<h3><a name="BUG0_23">BUG0_23</a></h3>
<dl><dt>Symptom</dt>
<dd>A Fluxcage explosion remains on a square forever.</dd>
<dt>Cause</dt>
<dd>If you open a pit or teleporter on a square where there is a Fluxcage explosion, the Fluxcage explosion is moved but the associated event is not updated (because Fluxcage explosions do not use the same event type as all other explosions) causing the Fluxcage explosion to remain in the dungeon forever on its destination square. When the event expires the explosion thing is not removed, but it is marked as unused. Consequently, any objects placed on the Fluxcage square after it was moved but before it expires become orphans upon expiration. After expiration, any object placed on the fluxcage square is cloned when picked up.<br/>
How to reproduce:
<ol><li>In Dungeon Master, go to map 2 at coordinates 09,38 where there is a blinking teleporter.</li>
<li>Use the Firestaff to place a Fluxcage on the teleporter square. The teleporter moves the Fluxcage to coordinates 15,38.</li>
<li>Place one or more objects on the square at 15,38. Note that you can pick up objects normally on that square.</li>
<li>Wait for the Fluxcage event to expire, at which point the objects on the floor disappear and become orphans. The Fluxcage is not removed from the square.</li>
<li>Place an object on the Fluxcage square, then pick up that object. It is not removed from the square and can be picked up multiple times, creating clones. Manipulating cloned things can crash the game.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_24">BUG0_24</a></h3>
<dl><dt>Symptom</dt>
<dd>Lord Chaos becomes invisible.</dd>
<dt>Cause</dt>
<dd>Lord Chaos may teleport into one of the Black Flames and become invisible until the Black Flame is killed.<br/>
How to reproduce:
<ol><li>Fight Lord Chaos on map 13 near the Black Flames.</li>
<li>Lord Chaos may teleport to a square where there is a Black Flame.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE2_07_FIX">CHANGE2_07_FIX</a>) Additional code added to move Lord Chaos as soon as possible to an adjacent square.</dd></dl>
<h3><a name="BUG0_25">BUG0_25</a></h3>
<dl><dt>Symptom</dt>
<dd>When a champion dies, no bones object is created so it is not possible to bring the champion back to life at an altar of Vi.</dd>
<dt>Cause</dt>
<dd>Each time a champion is brought back to life, the bones object is removed from the dungeon but it is not marked as unused and thus becomes an orphan. After a large number of champion deaths, all 'Junk' things are exhausted and the game cannot create any more. This also affects the creation of 'Junk' things dropped by some creatures when they die (Screamer, Rockpile, Magenta Worm, Pain Rat, Red Dragon).<br/>
How to reproduce:
<ol><li>Keep killing champions in your party and bringing them back to life at an altar of Vi until one champion dies and no bones are created.</li>
<li>Kill a creature that should drop 'Stuff' things when dying: no objects are dropped.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.1 EN (see <a href="#CHANGE8_03_FIX">CHANGE8_03_FIX</a>) Mark the thing data as unused so it is not orphaned anymore.</dd></dl>
<h3><a name="BUG0_26">BUG0_26</a></h3>
<dl><dt>Symptom</dt>
<dd>An explosion may fall in a pit.</dd>
<dt>Cause</dt>
<dd>If a pit is opened while there is an explosion above then the explosion falls into the pit. Explosions are not considered as levitating so they are moved when the pit is opened.<br/>
How to reproduce:
<ol><li>In Dungeon Master, go to map 8 at coordinates 22,12.</li>
<li>Cast a powerful Poison Cloud spell to the west on the square at coordinates 21,12.</li>
<li>Quickly move to coordinates 22,14 (through the poison cloud) and pull the lever. The pit at 21,12 opens and the poison cloud falls through the pit.</li>
<li>Jump in the pit to see the poison cloud on the map below.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>MOVE.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_27">BUG0_27</a></h3>
<dl><dt>Symptom</dt>
<dd>The dungeon view is drawn during a fall while the party is sleeping.</dd>
<dt>Cause</dt>
<dd>If a pit opens under the party while it is sleeping then the dungeon view is drawn during the fall without the floor and ceiling, even though it should not be visible at all until the party wakes up at the end of the fall. The code does not check if the party is sleeping while deciding if the dungeon view should be drawn during the fall.<br/>
How to reproduce:
<ol><li>Move to coordinates 24,18 on map 1 and get followed by the Mummy at 27,16.</li>
<li>Wait until the Mummy steps on 25,17 which closes the pit at 24,19.</li>
<li>Quickly move onto the closed pit square and sleep.</li>
<li>When the mummy moves again the pit opens and the following viewport is drawn:<br/>
<img src="IMAGES/BUG0_27_1.png" alt=""/> <img src="IMAGES/BUG0_27_2.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN</dd>
<dt>Affected files</dt>
<dd>MOVE.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE3_06_FIX">CHANGE3_06_FIX</a>) If the party is sleeping then the dungeon view is not drawn during a fall.</dd></dl>
<h3><a name="BUG0_28">BUG0_28</a></h3>
<dl><dt>Symptom</dt>
<dd>When falling through multiple pits the dungeon view is updated to show each traversed map but the graphics used for creatures, doors, wall and floor ornaments may not be correct.</dd>
<dt>Cause</dt>
<dd>The dungeon view is drawn for each map by using the graphics loaded for the map of origin. Therefore the graphics may not look like what they should.<br/>
How to reproduce:
<ol><li>Play on a computer with at least 1 MB of RAM so that all graphics are stored in memory. If the computer has only 512 KB of RAM then the dungeon view is not drawn at all while falling through pits as this would be very slow because of many floppy disk accesses.</li>
<li>In the Chaos Strikes Back dungeon, go to map 1 and jump into the pit at coordinates 19,28 while facing west.</li>
<li>On map 2 below you see this in CSB for Atari ST 2.0 EN (wrong graphics):<br/>
<img src="IMAGES/BUG0_28_1.png" alt=""/><br/>
At the same location, you see this in CSB for Atari ST 2.1 EN (correct graphics):<br/>
<img src="IMAGES/BUG0_28_2.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN</dd>
<dt>Affected files</dt>
<dd>MOVE.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.1 EN (see <a href="#CHANGE8_04_FIX">CHANGE8_04_FIX</a>) Appropriate graphics for each traversed map are loaded before drawing the dungeon view while falling.</dd></dl>
<h3><a name="BUG0_29">BUG0_29</a></h3>
<dl><dt>Symptom</dt>
<dd>An explosion can trigger a floor sensor.</dd>
<dt>Cause</dt>
<dd>Explosions do not trigger floor sensors on the square where they are created. However, if an explosion is moved by a teleporter (or by falling into a pit, see <a href="#BUG0_26">BUG0_26</a>) after it was created, it can trigger floor sensors on the destination square. This is because explosions are not considered as levitating in the code, while projectiles are.<br/>
How to reproduce:
<ol><li>In Chaos Strikes Back, go to map 2 at coordinates 20,10.</li>
<li>Face north and cast a high power poison cloud spell so that it will last as long as possible. When the explosion is created on the square at 20,9, the floor sensor is not triggered.</li>
<li>Turn around to face south and move one step backward into the poison cloud. The party triggers the floor sensor there which opens an invisible teleporter on the same square, moving the party and the explosion to coordinates 19,11.</li>
<li>Immediately after this teleportation, move one step to the right so that the party is not teleported anymore. The explosion can be seen moving in the corridor, teleported from one square to the next because the explosion itself triggers the floor sensors on each square. If you move one step back to the left you can even 'follow' the explosion in the corridor.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>MOVE.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_30">BUG0_30</a></h3>
<dl><dt>Symptom</dt>
<dd>A floor sensor is not triggered when you put an object on the floor if a levitating creature is present on the same square.</dd>
<dt>Cause</dt>
<dd>The condition to determine if the sensor should be triggered checks if there is a creature on the square but does not check whether the creature is levitating. While it is normal not to trigger the sensor if there is a non levitating creature on the square (because it was already triggered by the creature itself), a levitating creature should not prevent triggering the sensor with an object.<br/>
How to reproduce:
<ol><li>Create a custom dungeon.</li>
<li>Place a floor sensor triggered by objects that toggles a door.</li>
<li>On the same square as the sensor, place a levitating creature.</li>
<li>In the game, if you place an object on the floor while the levitating creature is present then the floor sensor is not triggered and the door does not open or close. If  there is no creature on the same square then an object placed on the floor will trigger the sensor and the door will open or close.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>SENSOR.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_31">BUG0_31</a></h3>
<dl><dt>Symptom</dt>
<dd>Floor sensors to detect the party on a stairs square are never triggered.</dd>
<dt>Cause</dt>
<dd>A wrong variable is used in a condition in the source code. This has no consequence in the games as this sensor type is not used in the original dungeons.<br/>
How to reproduce:
<ol><li>Create a custom dungeon and place a type 5 sensor on a stairs square to toggle a door.</li>
<li>Play the game. When moving through the stairs, the sensor is not triggered and the door does not open or close.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN</dd>
<dt>Affected files</dt>
<dd>SENSOR.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.1 EN (see <a href="#CHANGE8_05_FIX">CHANGE8_05_FIX</a>) The wrong variable is replaced by the correct variable in the condition.</dd></dl>
<h3><a name="BUG0_32">BUG0_32</a></h3>
<dl><dt>Symptom</dt>
<dd>The load of a champion with no objects in his inventory is not 0.</dd>
<dt>Cause</dt>
<dd>If you save the game with an object in the leader hand then when you resume or restart the game the weight of the object in the leader hand is permanently added to the load of the leader. When the game is saved, the weight of the leader hand object is substracted from the load of the leader. But when the game is loaded, the weight of the leader hand object is added twice to the load of the leader.<br/>
How to reproduce:
<ol><li>Grab an object in the leader hand. Take note of the weight of this object.</li>
<li>Take note of the load of the leader.</li>
<li>Save the game.</li>
<li>Restart the game and resume the saved game.</li>
<li>The load of the leader has increased by the weight of the object in the leader hand.</li>
<li>If you remove all objects from the champion inventory, the load is not 0 but the weight of the object that was in the leader hand when the game was saved.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_33">BUG0_33</a></h3>
<dl><dt>Symptom</dt>
<dd>The highlighted box around the acting champion's action hand is not cleared when clicking on a champion mirror.</dd>
<dt>Cause</dt>
<dd>There is no code to clear the acting champion before opening the inventory of a candidate champion in a mirror.<br/>
How to reproduce:
<ol><li>Start a new game.</li>
<li>Resurrect or reincarnate a champion with a weapon in the action hand (Iaido for example).</li>
<li>Click the weapon icon in the menu but do not click on an action name.</li>
<li>Resurrect or reincarnate another champion. The action hand of the first champion is still highlighted.<br/>
<img src="IMAGES/BUG0_33.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE2_08_FIX">CHANGE2_08_FIX</a>) Clear the acting champion before drawing the action icon of the candidate champion.</dd></dl>
<h3><a name="BUG0_34">BUG0_34</a></h3>
<dl><dt>Symptom</dt>
<dd>Graphical glitch when you quickly move the mouse into the action area after clicking on a portrait.</dd>
<dt>Cause</dt>
<dd>If you quickly move the mouse pointer over the action area where the action icon for the candidate champion will be drawn after clicking on a portrait and before the inventory is drawn on screen then there may be a graphical glitch where the mouse pointer erases a part of the action icon with a black rectangle in the action area 'behind' the mouse pointer. This is because the mouse pointer is not hidden while drawing the action icon. When the mouse pointer is moved over the action area, it captures the black pixels behind the pointer. The action icon is drawn and when the inventory is open, the mouse cursor is hidden which causes the captured black pixels to replace part of the action icon.<br/>
How to reproduce:
<ol><li>Click on a champion portrait.</li>
<li>Quickly move the mouse pointer over the action area where the action icon for the candidate champion will be drawn before the inventory is drawn.</li>
<li>A black rectangle is visible over the action icon where the mouse cursor is located.<br/>
<img src="IMAGES/BUG0_34.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_35">BUG0_35</a></h3>
<dl><dt>Symptom</dt>
<dd>The closed chest icon is drawn when the chest is opened.</dd>
<dt>Cause</dt>
<dd>If you open the inventory of a champion and place a Chest in the action hand, the closed chest icon is drawn instead of the open chest icon. If you place a Chest in the action hand before opening the inventory (in the champion status box on top of the screen) then when you open the inventory the open chest icon is drawn correctly in the action hand. Code is missing to change the icon when a chest is drawn in the action hand while in the inventory.<br/>
How to reproduce:
<ol><li>Open the inventory of champion.</li>
<li>Put a chest in the action hand. The closed chest icon is drawn even though the chest contents are drawn in the panel.<br/>
<img src="IMAGES/BUG0_35_1.png" alt=""/></li>
<li>Close the inventory and open it again. The open chest icon is drawn correctly.<br/>
<img src="IMAGES/BUG0_35_2.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE2_10_FIX">CHANGE2_10_FIX</a>) Code added to change the icon of the Chest and Scroll when in the action hand and in the inventory. This fix causes <a name="BUG2_00">BUG2_00</a> for scrolls.</dd></dl>
<h3><a name="BUG0_36">BUG0_36</a></h3>
<dl><dt>Symptom</dt>
<dd>A champion icon may be missing in the upper right corner of the screen after loading a saved game where at least one champion is dead.<br/>
Example where the green champion icon is missing:<br/>
<img src="IMAGES/BUG0_36.png" alt=""/></dd>
<dt>Cause</dt>
<dd>When a dead champion is reborn at a Vi Altar, the champion cell is set to the first available cell where there is no champion alive. It is then possible that the cell of the reborn champion is the same as the cell of another dead champion in the party. If the index of the dead champion is higher than the index of the reborn champion and the game is saved then when restarting the game from the saved game the icon of the reborn champion will not appear on screen. This is only a graphic glitch and you only need to click on the black area where the missing icon should be to make it appear again. When the game is loaded, the state of each champion is drawn. For a dead champion, this erases the champion icon according to the cell of the dead champion, even if another champion is at the same cell.<br/>
How to reproduce:
<ol><li>Start a new game and reincarnate or resurrect 3 champions.</li>
<li>Kill the first champion.</li>
<li>In the top right corner of the screen, move the icon of the second champion to the location previously occupied by the first champion icon.</li>
<li>Kill the second champion.</li>
<li>Bring the first champion back to life at a Vi Altar. The icon will take the cell previously occupied by the second champion. Both the first (alive) and second (dead) champions now refer to the same cell in the party.</li>
<li>Save the game.</li>
<li>Restart the game and resume from the saved game. The icon of the first champion is not visible.</li>
<li>Click on the missing icon location to make the icon appear on screen.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE3_07_FIX">CHANGE3_07_FIX</a>) The champion icon is erased when the champion is killed and not drawn anymore when drawing the state of a dead champion.</dd></dl>
<h3><a name="BUG0_37">BUG0_37</a></h3>
<dl><dt>Symptom</dt>
<dd>The contents of a chest are refreshed when grabbing or putting a Rabbit's Foot anywhere in the inventory. An object in a chest may disappear when grabbing a Rabbit's Foot from a chest. A champion may have a permanent bonus or malus to the (hidden) Luck statistic.</dd>
<dt>Cause</dt>
<dd>The Luck modifier of the Rabbit's Foot is applied when it is inside a container while it should not. This causes the following issues:
<ul><li>If a chest is open then each time you grab or put a Rabbit's Foot anywhere in the inventory the chest contents are drawn again in the panel. If there are empty slots in the chest then objects are reorganized so they occupy the first slots of the chest.</li>
<li>If there is an object in the leader hand when grabbing a Rabbit's Foot from a chest then the next object in the chest disappears and becomes an orphan.</li>
<li>When a champion puts a Rabbit's Foot in a chest, that champion's Luck is increased. When a champion removes a Rabbit's Foot from a chest, that champion's Luck is decreased. If you move a chest containing a Rabbit's Foot from one champion to another between these two operations, then the first champion keeps a permanent Luck bonus and the second champion has no bonus for possessing a Rabbit's Foot and will even get a malus when removing it from the chest.</li></ul>
How to reproduce:
<ol><li>Open a chest containing at least two objects and move objects in the chest so that there is at least an empty slot followed by at least one object.</li>
<li>Grab a Rabbit's Foot from any other location in the inventory. The chest contents are immediately reorganized so that there are no empty slots between objects.</li>
<li>Click on the object in the first slot in the chest to swap the Rabbit's Foot in the leader hand and the first object in the chest. Take note of the object that follows the Rabbit's Foot in the chest.</li>
<li>Click again on the Rabbit's Foot to swap it with the object in the leader hand. The object that followed the Rabbit's Foot in the chest disappears.</li>
<li>Put the Rabbit's Foot in the chest (this gives a Luck bonus to the champion) and close the chest.</li>
<li>Move the chest to another champion, open his inventory, remove the Rabbit's Foot from the chest and put it in the dungeon. The first champion now has a permanent Luck bonus (although he does not possess a Rabbit's Foot anymore) and the second champion has a permanent Luck malus. This cannot be seen in the game but can be seen by decoding a saved game.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE7_25_FIX">CHANGE7_25_FIX</a>) The Luck modifier of the Rabbit's Foot is not applied if it is in a chest.</dd></dl>
<h3><a name="BUG0_38">BUG0_38</a></h3>
<dl><dt>Symptom</dt>
<dd>A champion is much luckier than expected during combat when equipped with at least 4 cursed objects.</dd>
<dt>Cause</dt>
<dd>Champion statistic values are stored as one byte unsigned integers which can store values between 0 to 255. Each champion has a minimum, a maximum and a current value for each of the statistics. When an object modifier is applied to a statistic, all three values are modified but there is no check to make sure the new values stay in the bounds of 0 to 255. This is not an issue in most cases because nearly all modifiers are positive and with relatively small values so that any combination of champion statistic value with these modifiers will result in valid values. The only issue is with the hidden luck statistic and the modifier for cursed objects which is the only negative modifier in the game (-3). The minimum luck value for all champions is set to 10 at the beginning of the game and is only changed by object modifiers. If enough cursed objects are equipped (between 4 and 6) then the minimum value 'wraps around' and becomes a large value (254 with 4 cursed objects, 251 with 5 cursed objects and 248 with 6 cursed objects). The first time that the luck of the champion is tested after the cursed objects are equipped, the current luck value is set to its minimum value (248, 251 or 254) because the game detects that the current value is smaller than the minimum allowed. During the following luck tests:
<ul><li>If the test succeeds, the current luck is decreased by 2 and then bounded between the minimum and maximum values. The current value is then smaller than the minimum value so the current luck value is set to its minimum value (248, 251 or 254).</li>
<li>If the test fails, the current luck is increased by 2 and then bounded between the minimum and maximum values. The current value is then larger than the minimum value, however it is larger than the maximum value so the current value is set to its maximum value. During the next luck test, the current value will again be smaller than the minimum and be reset to the minimum value.</li></ul>
As a consequence, while the cursed objects are equipped, the current luck value can only have two possible values: either its maximum value, or its minimum value (which is even larger at 248, 251 or 254) so the champion is always luckier than he should be.<br/>
How to reproduce:
<ol><li>In the game, kill an Animated Armour/Deth Knight and collect the 6 cursed objects dropped (4 pieces or armor and 2 weapons).</li>
<li>Equip the four pieces of armor and place the weapons in both hands of a single champion. Make sure the champion does not have a Rabbit's Foot in his inventory which would add 10 to his luck statistic.</li>
<li>The luck of the champion is modified by 6 * -3 = -18. The minimum value for luck is now set to 248.</li>
<li>From now on, each test of the champion's luck will have a higher probability of success (it may still fail because of the random nature of the test). Luck is tested when a creature attacks a champion, when a champion attacks a creature and when a Giggler tries to steal objects from action hands. During combat, the champion will hit creatures more frequently and be hit by creatures less frequently.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_39">BUG0_39</a></h3>
<dl><dt>Symptom</dt>
<dd>In the leader inventory, the Food/Water/Poisoned panel is briefly drawn when replacing a scroll or chest by another scroll or chest in the action hand. This does not occur for champions other than the leader.</dd>
<dt>Cause</dt>
<dd>When swapping the objects between the action hand and the leader hand, the program first removes the object in the action hand. If the removed object is a chest or a scroll then this sets a flag in the champion data to refresh the panel. Then the object in the leader hand is removed. The weight of the object in the leader hand is part of the load of the leader, so this sets another flag in the champion data of the leader to refresh the Load value and then calls the function to draw the leader champion state. If the champion is not the leader, nothing is drawn. If the champion is the leader, the Food/Water/Poisoned panel is drawn because at this point the action hand is empty. Then the object that was removed from the leader hand is put in the action hand and this draws the panel again, this time showing the chest contents or scroll text.<br/>
How to reproduce:
<ol><li>Open the inventory of the leader.</li>
<li>Put a chest or scroll in the action hand.</li>
<li>Grab another chest or scroll and replace the one in the action hand.</li>
<li>The Food/Water/Poisoned panel is briefly drawn before the panel is updated to show the chest contents or the scroll.</li>
<li>Repeat steps 2-4 with another champion that is not the leader. The Food/Water/Poisoned panel is not drawn before updating the panel.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_40">BUG0_40</a></h3>
<dl><dt>Symptom</dt>
<dd>If a champion has The Firestaff in the action hand then skill modifiers from other objects (Pendant Feral, Ekkhard Cross, Gem of Ages and Moonstone) are ignored.</dd>
<dt>Cause</dt>
<dd>Wrong code causes the skill modifier of the Firesatff not to be cumulative with other modifiers.<br/>
How to reproduce:
<ol><li>Press the eye with an empty hand in the inventory of a champion to check his Wizard level.</li>
<li>Put a Pendant Feral around the neck of the champion. His Wizard level is increased by one.</li>
<li>Put the Firestaff in the action hand of the same champion. The champion Wizard level is back to its previous value, the modifier of the Pendant Feral is ignored.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE3_09_FIX">CHANGE3_09_FIX</a>) The skill modifier of the Firestaff is cumulative with other modifiers.</dd></dl>
<h3><a name="BUG0_41">BUG0_41</a></h3>
<dl><dt>Symptom</dt>
<dd>The Antifire and Antimagic statistics are completely ignored. The Vitality statistic is ignored against poison and to determine the probability of being wounded. Vitality is still used normally to compute the defense against wounds and the speed of health regeneration.</dd>
<dt>Cause</dt>
<dd>The Megamax C compiler used to develop the game contains a bug that produces wrong machine code for the function that adjusts an attack value based on the value of a champion statistic. No matter the actual value of the statistic, it is always considered to be 0 and consequently the specified attack values are always affected in the same way.<br/>
How to reproduce:
<ol><li>Gather a party containing champions with very different values for antifire.</li>
<li>Face a wall and cast multiple fireballs of a given power.</li>
<li>The damage inflicted to each champion is partly randomized so they never get exactly the same damage. However after casting many fireballs, you cannot see any difference between champions regarding the efficiency of a high value for the antifire statistic.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_42">BUG0_42</a></h3>
<dl><dt>Symptom</dt>
<dd>The action icons are not drawn in the action area after you unfreeze the game.</dd>
<dt>Cause</dt>
<dd>The variable defining what to draw in the action area is not set in the right function in the code.<br/>
How to reproduce:
<ol><li>Place any weapon in the action hand of a champion and face a creature.</li>
<li>Click the weapon icon in the action area then click on an action name to cause damage to the creature.</li>
<li>Immediately after clicking the action name and while the damage caused to the creature is still visible in the action area, press the ESC key to freeze the game.</li>
<li>Unfreeze the game. The weapon icons in the action area are not drawn:<br/>
<img src="IMAGES/BUG0_42.png" alt=""/></li>
<li>You can sleep and wake up to force the icons to be drawn again.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE3_10_FIX">CHANGE3_10_FIX</a>) The variable defining what to draw in the action area is set in the appropriate function.</dd></dl>
<h3><a name="BUG0_43">BUG0_43</a></h3>
<dl><dt>Symptom</dt>
<dd>The game does not end if the last living champion in the party is killed while looking at a candidate champion in a portrait.</dd>
<dt>Cause</dt>
<dd>The condition to end the game when the whole party is killed is not true because the code considers the candidate champion as alive.<br/>
How to reproduce:
<ol><li>Resurrect or reincarnate a champion that has some mana and wizard skills.</li>
<li>Bump into a wall until the champion's health is close to 0.</li>
<li>Face the portrait of another champion and cast a poison cloud spell.</li>
<li>Click on the portrait. When the first champion dies because of the poison cloud, the game does not end as it should:<br/>
<img src="IMAGES/BUG0_43_1.png" alt=""/></li>
<li>Click cancel. The spell area of the candidate champion is still visible, and you can still move around in the dungeon:<br/>
<img src="IMAGES/BUG0_43_2.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_44">BUG0_44</a></h3>
<dl><dt>Symptom</dt>
<dd>A champion may take much more damage than expected after a Black Flame attack or an impact with a Fireball projectile.</dd>
<dt>Cause</dt>
<dd>If the party has a fire shield defense value higher than the fire attack value then the resulting intermediary attack value is negative and damage should be 0. However, the negative value is still used for further computations and the result may be a very high positive attack value which may kill a champion.<br/>
How to reproduce:
<ol><li>Cast two or more 'Fire Shield' spells with the highest power symbol so that they will have maximum efficiency and duration.</li>
<li>Face a wall and cast a 'Fireball' spell with the lowest power symbol. Because of the randomness of damage computations, you may need to cast several fireballs before the issue occurs.</li>
<li>The champions in the party may either take normal damage or a very high damage that will probably kill them.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE3_12_FIX">CHANGE3_12_FIX</a>) The champion damage is 0 if the party fire shield value is higher than the fire attack value.</dd></dl>
<h3><a name="BUG0_45">BUG0_45</a></h3>
<dl><dt>Symptom</dt>
<dd>No perceptible symptom while playing the game because of <a name="BUG0_41">BUG0_41</a> that ignores Vitality while determining the probability of being wounded. However if it was fixed, the behavior would be the opposite of what it should: the higher the vitality of a champion, the more likely the champion could get wounded.</dd>
<dt>Cause</dt>
<dd>A higher vitality value would cause the code to perform more iterations to try and wound the champion.</dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_46">BUG0_46</a></h3>
<dl><dt>Symptom</dt>
<dd>You can run into a projectile shot by a champion.</dd>
<dt>Cause</dt>
<dd>When a champion throws an object, movement is disabled for a short time in the direction in which the object was thrown to prevent the party from running into the projectile. However, when a champion shoots an object or casts a spell, movement is not disabled and the party can run into the projectile. This applies to the actions 'Shoot' (Bow/Claw Bow, Crossbow, Speedbow, Sling), 'Lightning' (Stormring, Bolt Blade/Storm , The Conduit/Serpent Staff), 'Dispell' (Yew Staff, Staff Of Manar/Staff Of Irra), 'Fireball' (Flamitt, Fury/Ra Blade), 'Spit' (none), 'Invoke' (The Firestaff) and to all projectile spells (Fireball, Lightning Bolt, Harm Non Material, Open Door, Poison Bolt, Poison Cloud).<br/>
How to reproduce:
<ul><li>Make sure the party can move as fast as possible: no feet injuries and low load values for all champions in the party (no load value displayed in yellow or red).</li>
<li>Cast a 'Fireball' spell in a corridor.</li>
<li>Immediately move forward as fast as possible.</li>
<li>The projectile impacts the party.</li></ul></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.1 EN (see <a href="#CHANGE8_07_FIX">CHANGE8_07_FIX</a>) Movement is disabled for a short time after shooting projectiles.</dd></dl>
<h3><a name="BUG0_47">BUG0_47</a></h3>
<dl><dt>Symptom</dt>
<dd>Graphical glitch when you open a scroll.</dd>
<dt>Cause</dt>
<dd>If there is a single line of text in a scroll (with no carriage return) then the code uses a pointer to undefined data. This may result in a graphical glitch and also corrupt other memory. This is not an issue in the original dungeons where all scrolls contain at least one carriage return character.<br/>
How to reproduce:
<ol><li>Create a custom dungeon and place a scroll with a single line of text and no carriage return.</li>
<li>In the game, grab the scroll and place it in the action hand.</li>
<li>Open the inventory. The game may show a graphical glitch when printing the scroll text:<br/>
<img src="IMAGES/BUG0_47.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>INVNTORY.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_48">BUG0_48</a></h3>
<dl><dt>Symptom</dt>
<dd>The contents of a chest are reorganized when an object with a statistic modifier is placed or removed on a champion.</dd>
<dt>Cause</dt>
<dd>When drawing the panel, the chest is always closed first and then reopened again.<br/>
How to reproduce:
<ul><li>Open a chest.</li>
<li>Place and object with a modifier in an appropriate champion inventory slot, for example place a Crown Of Nerra on the head or a Moonstone around the neck.</li>
<li>Objects in the chest are reorganized so that there is no empty slot between them.</li></ul></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.1 EN</dd>
<dt>Affected files</dt>
<dd>INVNTORY.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.0 EN (see <a href="#CHANGE7_27_FIX">CHANGE7_27_FIX</a>) The chest is closed only if pressing the eye or mouth and opened only if it was not already opened.<br/>
Reintroduced in CSB for Atari ST 2.1 EN (see <a href="#CHANGE8_09_FIX">CHANGE8_09_FIX</a>).</dd></dl>
<h3><a name="BUG0_49">BUG0_49</a></h3>
<dl><dt>Symptom</dt>
<dd>When examining an 'Empty Flask' the description string shows an undesired symbol.</dd>
<dt>Cause</dt>
<dd>The code contains an exception not to draw the power for 'Water Flask' potions but a similar exception is missing for 'Empty Flask' potions. These are processed like all other potions so that the power symbol is drawn.<br/>
How to reproduce:
<ol><li>Grab an Empty Flask in the leader hand.</li>
<li>Open the inventory and press on the eye. For an empty flask that was in the dungeon from the start and never contained a potion, the first character of the description string is an underscore '_':<br/>
<img src="IMAGES/BUG0_49_1.png" alt=""/><br/>
For an empty flask that previously contained a potion that was drank, the first character of the description string is the power symbol of the last potion it contained:<br/>
<img src="IMAGES/BUG0_49_2.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>INVNTORY.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_50">BUG0_50</a></h3>
<dl><dt>Symptom</dt>
<dd>When a champion is brought back to life at a Vi Altar, his current stamina is lower than what it was before dying.</dd>
<dt>Cause</dt>
<dd>Each time the party moves the current stamina of all champions is decreased, including for dead champions, by an amount that depends on the current load of the champion. For a dead champion the load before he died is used.<br/>
How to reproduce:
<ol><li>Fill the inventory of a champion so that his load has a high value.</li>
<li>Kill the champion and note the value of his current stamina before he dies.</li>
<li>Move the party in the dungeon (at least ten steps).</li>
<li>Bring the champion back to life at a Vi Altar. The current stamina value is lower than what it was before the champion died.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN</dd>
<dt>Affected files</dt>
<dd>COMMAND.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.1 EN (see <a href="#CHANGE8_10_FIX">CHANGE8_10_FIX</a>) Do not decrease stamina of dead champions when the party moves.</dd></dl>
<h3><a name="BUG0_51">BUG0_51</a></h3>
<dl><dt>Symptom</dt>
<dd>Throwing the object in the leader hand does not stop the wait for player input in the main loop.</dd>
<dt>Cause</dt>
<dd>Each time player input with the mouse or keyboard causes some meaningful activity in the game (like moving, performing an action, casting a spell, etc.) the main game loop stops waiting for more player input and proceeds with advancing the game time by one tick and managing everything else. Throwing the object in the leader hand is the only such activity inconsistent with all others.</dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN</dd>
<dt>Affected files</dt>
<dd>COMMAND.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.1 EN (see <a href="#CHANGE8_11_FIX">CHANGE8_11_FIX</a>) Throwing the object in the leader hand stops the wait for player input in the main loop.</dd></dl>
<h3><a name="BUG0_52">BUG0_52</a></h3>
<dl><dt>Symptom</dt>
<dd>Graphical glitches and crashes. If you press the Escape key or CTRL-S on the keyboard while pressing the Eye or Mouth with the mouse then graphical glitches can occur and the game may crash.</dd>
<dt>Cause</dt>
<dd>Some keyboard commands (Freeze Game, Unfreeze Game, Save game) should be ignored but are not when pressing the eye or mouth.<br/>
How to reproduce:
<ol><li>Open a champion inventory and either click on the eye, or place a chest or scroll in the action hand and then click on the mouth.</li>
<li>While still pressing on the eye or mouth with the mouse, perform one of the following steps:
<ol><li>Press the CTRL-S key combination on the keyboard to open the save game dialog then release the mouse button. When the save game dialog is drawn, the mouse pointer is not visible but it is still possible to move the invisible pointer over a dialog choice and click.</li>
<li>Press the Escape key on the keyboard to freeze the game then release the mouse button. The panel is drawn over the freeze game screen. If you press Escape another time or click a mouse button the inventory is redrawn correctly.<br/><img src="IMAGES/BUG0_52_1.png" alt=""/></li>
<li>Press the Escape key on the keyboard a first time to freeze the game and then a second time to unfreeze the game. The dungeon view is drawn. Release the mouse button and then the panel is briefly drawn over the dungeon view.<br/><img src="IMAGES/BUG0_52_2.png" alt=""/><br/>If you do not move the mouse and click again then the panel is drawn again as if you clicked on the eye but the panel content is incoherent. If you click the right mouse button to toggle inventory another graphical glitch occurs: the status box of a "fifth" champion is drawn over the champion icons in the top right corner of the screen, and overwrites parts of the leftmost champion status box. Crashes may occurs during these manipulations.<br/><img src="IMAGES/BUG0_52_3.png" alt=""/></li>
</ol></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR</dd>
<dt>Affected files</dt>
<dd>COMMAND.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE7_02_FIX">CHANGE7_02_FIX</a>). A test was added to ignore some commands when the eye or mouth is pressed. The variables used in the test are not modified anymore directly by the mouse exception handler to prevent their value from changing while processing commands so that the test is reliable.</dd></dl>
<h3><a name="BUG0_53">BUG0_53</a></h3>
<dl><dt>Symptom</dt>
<dd>It is possible to sleep while the inventory of a candidate champion is open. When the party wakes up, it is possible to add a duplicate copy of the same champion to the party. All the champion possessions are then cloned objects. It is also possible to grab an object from the candidate champion before sleeping and this will clone that object.</dd>
<dt>Cause</dt>
<dd>The sleep icon is erased when the inventory of a candidate champion is opened but it is still possible to click on the sleep icon location on the top right of the viewport.<br/>
How to reproduce:
<ol><li>Click on a champion portrait to open the inventory of a candidate champion.</li>
<li>Click on the location of the sleep icon on the top right of the viewport.</li>
<li>Click to wake up the party.</li>
<li>Click again on the champion portrait. If you click Resurrect or Reincarnate you end up with two identical champions in the party (it is possible to have four identical champions in the party by repeating steps 1-3 three times).</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN</dd>
<dt>Affected files</dt>
<dd>COMMAND.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE2_15_FIX">CHANGE2_15_FIX</a>) The sleep action is disabled when the inventory of a candidate champion is opened.</dd></dl>
<h3><a name="BUG0_54">BUG0_54</a></h3>
<dl><dt>Symptom</dt>
<dd>The defense modifier of an action is permanent.</dd>
<dt>Cause</dt>
<dd>Each action has an associated defense modifier value and a number of ticks while the champion cannot perform another action because the action icon is grayed out. If an action has a non zero defense modifier and a zero value for the number of ticks then the defense modifier is applied but it is never removed. This causes no issue in the original games because there are no actions in this case but it may occur in a version where data is customized.<br/>
How to reproduce:
<ol><li>Customize game data so that one action has a non zero defense modifier and a number of ticks set to zero.</li>
<li>Perform the action multiple times. The defense modifier is applied multiple times to the champion and remains permanently. From now on, defense against creature attacks is much more efficient.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>MENUS.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_55">BUG0_55</a></h3>
<dl><dt>Symptom</dt>
<dd>A champion in the back row may perform a melee attack even if there is another champion between him and the target creature.</dd>
<dt>Cause</dt>
<dd>The code to detect if a champion has another champion in front of him is wrong. If there is a delta of 2 between the cell and the direction of a champion then the presence of another champion in front of him is ignored.<br/>
How to reproduce:
<ol><li>Create a party with at least two champions located in the front right and back right cells on the party square.</li>
<li>Find a creature to attack.</li>
<li>While facing North, use a melee attack of the champion in the back right cell. The action should fail because there is another champion in the front right cell but it will succeed anyway.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN</dd>
<dt>Affected files</dt>
<dd>MENUS.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE3_14_FIX">CHANGE3_14_FIX</a>) The code to detect if a champion has another champion in front of him is fixed.</dd></dl>
<h3><a name="BUG0_56">BUG0_56</a></h3>
<dl><dt>Symptom</dt>
<dd>You can climb down a pit with the rope even if there is a group levitating over it.</dd>
<dt>Cause</dt>
<dd>The code does not check if a group is over the pit.<br/>
How to reproduce:
<ol><li>Face a levitating creature (like Giant Wasp, Ghost, Flying Eye, Couatl, Vexirk, Materializer, Lord Chaos) that is over a pit.</li>
<li>Use the 'Climb down' action of the rope.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR</dd>
<dt>Affected files</dt>
<dd>MENUS.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE6_00_FIX">CHANGE6_00_FIX</a>) The presence of a group over the pit is checked so that you cannot climb down a pit with the rope if there is a group levitating over it.</dd></dl>
<h3><a name="BUG0_57">BUG0_57</a></h3>
<dl><dt>Symptom</dt>
<dd>The object in the leader hand disappears after saving the game.</dd>
<dt>Cause</dt>
<dd>The object is removed from the leader hand before saving the champion data so that its weight is not permanently added to the load of the leader. Also the object name is not visible while saving. However the object is not put back in the leader hand when saving is complete, which creates an orphan. If the game is loaded, then the object is restored in the leader hand. If the game is saved a second time, the object cannot be recovered.<br/>
How to reproduce:
<ol><li>Grab an object in the leader hand.</li>
<li>Save the game and choose 'Save and Play'.</li>
<li>After saving is complete, the object is not in the leader hand anymore.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN</dd>
<dt>Affected files</dt>
<dd>STARTND2.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE1_02_FIX">CHANGE1_02_FIX</a>) The object is not removed from the leader hand anymore. Its weight is substracted from the load before saving and added afterwards. The object name remains visible while saving.</dd></dl>
<h3><a name="BUG0_58">BUG0_58</a></h3>
<dl><dt>Symptom</dt>
<dd>The game stops with message 'SYSTEM ERROR 41' when you click Resume on the entrance screen and then click Cancel.</dd>
<dt>Cause</dt>
<dd>If the game disk is not in the floppy disk drive when clicking Cancel then the game fails to open the graphics.dat file.<br/>
How to reproduce:
<ol><li>On the entrance screen, click Resume.</li>
<li>Remove the game disk from the floppy disk drive and insert a saved game disk.</li>
<li>Click Cancel. The game stops:<br/>
<img src="IMAGES/BUG0_58.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN</dd>
<dt>Affected files</dt>
<dd>STARTND2.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE2_19_FIX">CHANGE2_19_FIX</a>) The game disk is required when clicking Cancel.</dd></dl>
<h3><a name="BUG0_59">BUG0_59</a></h3>
<dl><dt>Symptom</dt>
<dd>The game hangs when using the Fuse action on Lord Chaos.</dd>
<dt>Cause</dt>
<dd>If there is a Fluxcage on the square where Lord Chaos stands then it is not removed as it should and this hangs the game while processing the end sequence.<br/>
How to reproduce:
<ol><li>Place a Fluxcage on the Lord Chaos square and also on all sides of this square.</li>
<li>Use the Fuse action on the Firestaff. The game hangs.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN</dd>
<dt>Affected files</dt>
<dd>STARTND2.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE2_20_FIX">CHANGE2_20_FIX</a>) Fluxcages are removed correctly from both the party square and the Lord Chaos square.</dd></dl>
<h3><a name="BUG0_60">BUG0_60</a></h3>
<dl><dt>Symptom</dt>
<dd>On the Reincarnate/Resurrect screen, the 'Arrow' mouse pointer is replaced by the 'Hand' pointer after you grab an object and put it back.</dd>
<dt>Cause</dt>
<dd>After an object is placed in the inventory, the mouse pointer is always set to the 'Hand' without checking if the Reincarnate/Resurrect buttons are on screen.<br/>
How to reproduce:
<ol><li>Start a new game in Dungeon Master.</li>
<li>Click on a champion portrait. The mouse pointer is the 'Arrow' while waiting for you to click on Reincarnate, Resurrect or Cancel.</li>
<li>Grab an object in the champion inventory and put it back. The mouse pointer is changed to the 'Hand' pointer.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>START.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG0_61">BUG0_61</a></h3>
<dl><dt>Symptom</dt>
<dd>The game stops with message 'SYSTEM ERROR 60' right after restarting from a saved game.</dd>
<dt>Cause</dt>
<dd>The game manages a watchdog event to detect issues with the timeline processing. Each time the watchdog event expires, a new watchdog event is scheduled to occur 300 ticks later. If at any point the watchdog event time is in the past compared to the current game time then the game is stopped with the error message. The issue is that the watchdog event time is not reset when restarting from a saved game so if you restore a game where the current time is in the future compared to the watchdog time then the game stops.<br/>
How to reproduce:
<ol><li>Start a new game and save the game on floppy A.</li>
<li>Wait for 5 minutes and save the game again on floppy B.</li>
<li>Boot the game and resume the game from floppy A, then wait for 2 minutes.</li>
<li>Kill your party (bump in walls or cast Fireballs while facing a wall).</li>
<li>On the end screen, click on 'Restart this game' and resume from floppy B. Once the game is loaded, the 'SYSTEM ERROR 60' message is drawn and the game hangs:<br/>
<img src="IMAGES/BUG0_61.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN</dd>
<dt>Affected files</dt>
<dd>START.C</dd>
<dt>Resolution</dt>
<dd>Fixed in DM for Atari ST 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE2_05_FIX">CHANGE2_05_FIX</a>) The watchdog event time is reset after the game is restarted.</dd></dl>
<h3><a name="BUG0_62">BUG0_62</a></h3>
<dl><dt>Symptom</dt>
<dd>The game stops with message 'SYSTEM ERROR 41' if the game disk is removed from the floppy disk drive after resuming from a saved game on the entrance screen and before clicking OK in the 'Game loaded, ready to play.' dialog. This does not occur when restarting the game after the party has died.</dd>
<dt>Cause</dt>
<dd>When the dialog box is displayed after loading the game, the graphics.dat file is still open while it should have been closed. The game then detects which disk is in the drive and this causes the file to be closed and opened again, but reopening the file fails if the game disk is not in the drive.<br/>
How to reproduce:
<ol><li>On the entrance screen, insert the saved game disk in the floppy disk drive and click on 'Resume'.</li>
<li>Insert the game disk when asked and wait for the message 'Game loaded, ready to play.'.</li>
<li>Remove the game disk from the floppy disk drive and click OK. The game stops:<br/>
<img src="IMAGES/BUG0_62.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR</dd>
<dt>Affected files</dt>
<dd>START.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE7_39_FIX">CHANGE7_39_FIX</a>). The graphics.dat file is closed before detecting the disk type and reopened after ensuring the game disk is in the drive.</dd></dl>
<h3><a name="BUG0_63">BUG0_63</a></h3>
<dl><dt>Symptom</dt>
<dd>The behavior of groups and the directions of individual creatures in groups are not restored when a saved game is loaded.</dd>
<dt>Cause</dt>
<dd>Each group on the same map as the party has additional data that other groups do not have. This additional data is stored as part of saved games and loaded when the game is restarted. However, after loading a saved game the function to initialize this data is called. This overwrites the data and thus the state of groups when the game was saved is ignored.<br/>
How to reproduce:
<ol><li>Save the game while a group is fleeing from the party (after using War Cry or Blow Horn actions for example) or while all the creatures in a group do not face the same direction.</li>
<li>Load the game. The group that was fleeing does not flee anymore. All the creatures in each group face the same direction.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>MAIN.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_64">BUG0_64</a></h3>
<dl><dt>Symptom</dt>
<dd>Floor ornaments are drawn over open pits.</dd>
<dt>Cause</dt>
<dd>There is no check to prevent drawing floor ornaments over open pits.<br/>
How to reproduce:
<ol><li>Create a custom dungeon and place a floor ornament over an open pit square.</li>
<li>In the game, the floor ornament is drawn over the open pit.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_65">BUG0_65</a></h3>
<dl><dt>Symptom</dt>
<dd>Torches created by object generator or projectile launcher sensors have no charges.</dd>
<dt>Cause</dt>
<dd>Charges are only defined if the Torch is lit which is not possible at the time it is created. This has no consequence in the original Dungeon Master and Chaos Strikes Back dungeons because there are no such sensors.<br/>
How to reproduce:
<ol><li>Create a custom dungeon.</li>
<li>Place an object generator or projectile launcher sensor configured to create Torches.</li>
<li>Trigger the sensor and place the new Torch in the action hand: it does not produce any light.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>DUNGEON.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_66">BUG0_66</a></h3>
<dl><dt>Symptom</dt>
<dd>Smoke is placed on the source map instead of the destination map when a creature dies by falling through a pit.</dd>
<dt>Cause</dt>
<dd>The game has a special case to correctly drop the creature possessions on the destination map but there is no such special case for the smoke. Note that the death must be caused by the damage of the fall (there is no smoke if the creature is removed because its type is not allowed on the destination map). However this bug has no visible consequence because of <a href="#BUG0_26">BUG0_26</a>: the smoke explosion falls in the pit right after being placed in the dungeon and before being drawn on screen so it is only visible on the destination square.</dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_67">BUG0_67</a></h3>
<dl><dt>Symptom</dt>
<dd>A group that is not on the party map may wrongly move or not move into a teleporter.</dd>
<dt>Cause</dt>
<dd>Normally, a creature type with Wariness >= 10 (Vexirk, Materializer / Zytaz, Demon, Lord Chaos, Red Dragon / Dragon) would only move into a teleporter if the creature type is allowed on the destination map. However a variable identifying the group is not set before being used so the check to see if the creature type is allowed may operate on another creature type and thus return an incorrect result, causing the creature to teleport while it should not, or not to teleport while it should.<br/>
How to reproduce:
<ol><li>Create a custom dungeon. Place a dragon on a map behind a teleporter targeting another map where dragons are not allowed.</li>
<li>Place other creatures like Gigglers that are allowed on both the same map as the dragon and the destination map of the teleporter.</li>
<li>Play the game and go to the map where the dragon is located so it that starts moving (groups do not move until you enter their map for the first time). As long as you stay on the same map as the dragon, it will never enter the teleporter.</li>
<li>Go to the target map of the teleporter. The dragon may eventually be teleported to this map and die (you should see Dragon Steak on the target squere).</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_68">BUG0_68</a></h3>
<dl><dt>Symptom</dt>
<dd>A group moves or acts with a wrong timing.</dd>
<dt>Cause</dt>
<dd>The behavior and animation of groups is managed with events. Each of these events contains the delay before the next event for the group. In some cases, this delay is left undefined when the event is added to the timeline. This happens when a group moves on another map than the party map or when a group has a reaction (after seeing another creature in the group die, being hit by a projectile or a closing door and attacked or bumped into by the party).</dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_69">BUG0_69</a></h3>
<dl><dt>Symptom</dt>
<dd>Memory corruption when you close a door on Lord Chaos.</dd>
<dt>Cause</dt>
<dd>The local variable containing the direction where Lord Chaos tries to move may be used as an array index without being initialized and cause memory corruption.<br/>
This bug can only be triggered in versions 1.2 and 1.3 because <a href="#BUG0_15">BUG0_15</a> hangs the game in earlier versions. The actual consequences depend on the value of the uninitialized local variable.<br/>
How to reproduce:
<ol><li>Attract Lord Chaos on a door square.</li>
<li>Close the door.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd>
<dt>Resolution</dt>
<dd>Fixed in CSB for Atari ST 2.0 EN, 2.1 EN (see <a href="#CHANGE7_19_FIX">CHANGE7_19_FIX</a>). When Lord Chaos senses danger on his square (because of a Poison Cloud, a closing door or 3 surrounding Fluxcages) he teleports in a direction initialized with a random value.</dd></dl>
<h3><a name="BUG0_70">BUG0_70</a></h3>
<dl><dt>Symptom</dt>
<dd>A projectile impact on a creature may be ignored.</dd>
<dt>Cause</dt>
<dd>The function to detect projectile impacts when a quarter square sized creature moves inside a group (to another cell on the same square) may fail if there are several creatures in the group because of an incorrect parameter value.<br/>
How to reproduce:
<ol><li>Face a group of three mummies where two mummies are on the back and one is on the front.</li>
<li>Throw an object or cast a spell on the side where there is only one mummy in the back.</li>
<li>If the mummy on that side moves to the front cell of the square at the appropriate time when the projectile is on the same square then the projectile moves through the creature and does not impact. You may have to try several times until the issue occurs.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_71">BUG0_71</a></h3>
<dl><dt>Symptom</dt>
<dd>Some timings are too short on fast computers.</dd>
<dt>Cause</dt>
<dd>The following things happen on a fast computer because the execution speed is not limited:<br/>
<ul><li>After the zoom effect, the title screen is replaced by the entrance screen too quickly</li>
<li>When the player clicks on 'Enter' on the entrance screen, the doors open too quickly</li>
<li>When the party falls in a series of pits, the dungeon view is refreshed too quickly</li>
<li>The ending animation when Lord Chaos is fused plays too quickly</li></ul></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>MOVE.C, STARTND2.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_72">BUG0_72</a></h3>
<dl><dt>Symptom</dt>
<dd>The party moves very slowly even though no champion 'Load' value is drawn in red.</dd>
<dt>Cause</dt>
<dd>When the Load of a champion has exactly the maximum value he can carry then the Load is drawn in yellow but the speed is the same as when the champion is overloaded (when the Load is drawn in red).<br/>
How to reproduce:
<ol><li>Make sure the Load values of all champions are drawn in gray. Drop objects if necessary.</li>
<li>Place as much objects as necessary in the inventory of a champion until the Load value is drawn in red.</li>
<li>Remove small objects weighing 0.1 Kg from the inventory until the Load value is drawn in yellow. This is the maximum value that the champion can carry without being overloaded.</li>
<li>Move the party. The movement speed is the same as if the party was overloaded but the Load color is not red.</li>
<li>Remove one more object weighing 0.1 Kg from the inventory. The movement speed is now faster even though the Load color is still yellow.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_73">BUG0_73</a></h3>
<dl><dt>Symptom</dt>
<dd>A mouse click may be ignored.</dd>
<dt>Cause</dt>
<dd>A mouse command may be overwritten by a keyboard command in the command queue before being processed. The game can queue up to 4 mouse and keyboard commands and uses a semaphore to prevent concurrent accesses to the command queue data. However, the semaphore is a 2 bytes value. When regular functions manipulate the command queue, a flag is set in the least significant byte. When a mouse click occurs, this triggers and interrupt but the code checks and sets a flag in the most significant byte, thus ignoring any flag set in the other byte. Normally, if the command queue is locked, the program should buffer the mouse click in dedicated global variables until the command queue is available again. Because of the bug, the buffering is actually never used.<br/>
How to reproduce:
<ol><li>Press the down arrow key on the keyboard to input a command.</li>
<li>Click the left mouse button while the pointer is over the forward arrow to input another command.</li>
<li>With the appropriate timing between these two operations (extremely difficult to achieve on purpose), the mouse click will be ignored.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>COMMAND.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_74">BUG0_74</a></h3>
<dl><dt>Symptom</dt>
<dd>Creatures are drawn with wrong colors when viewed through a wall with the 'Thieve's Eye' spell.</dd>
<dt>Cause</dt>
<dd>In order to produce the visual effect of the spell, the engine has to compose several graphics. The game first captures a portion of what is visible behind the wall in a temporary location and then draws the 'hole in wall' graphic over it using transparency for the inner color, which is color 10 (at the center of the 'hole in wall' graphic):<br/>
<img src="IMAGES/BUG0_74_1.png" alt=""/><br/>
Next, it draws the wall in front of the party (overwriting what was previously visible). Finally it draws the graphic from the temporary location using transparency for the outer color, which is color 9 (in the corners of the 'hole in wall' graphic). However, color 9 may be used by creature graphics that are now visible in the center part of the graphic. Consequently, all creature graphic pixels using color 9 will not be drawn during this last operation and the pixels from the background wall will be visible instead, giving creatures a strange appeareance with wrong grey/white colors.<br/>
The bug is only visible with creature graphics that use color 9: Giant Scorpion / Scorpion, Swamp Slime / Slime Devil, Wizard Eye / Flying Eye, Pain Rat, Ruster, Magenta Worm / Worm, Trolin / Ant Man, Materializer / Zytaz (except the back graphic), Water Elemental, Oitu, Demon, Lord Chaos (except the back graphic), Red Dragon / Dragon, Lord Order, Grey Lord. There is no bug when viewing through a door.<br/>
How to reproduce:
<ol><li>In Dungeon Master go to map 2 at coordinates 26,34 and face west.</li>
<li>Cast a 'Thieve's Eye' spell.</li>
<li>Wait until Trolins move in front of the hole in the wall.</li>
<li>The Trolins are drawn with wrong colors:<br/>
<img src="IMAGES/BUG0_74_2.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_75">BUG0_75</a></h3>
<dl><dt>Symptom</dt>
<dd>Multiple champion portraits are drawn (one at a time) then the game crashes.</dd>
<dt>Cause</dt>
<dd>The global variable storing the champion portrait to draw is only reset when at least one square in the dungeon view is a wall. If the party is in front of a wall with a champion portrait and the next time the dungeon view is drawn there is no wall square in the view and the square in front of the party is a fake wall with a random ornament then the same champion portrait will be drawn again because the variable was not reset. A different portait is drawn each time the dungeon view is refreshed until the game crashes.<br/>
How to reproduce:
<ol><li>Create a custom dungeon.</li>
<li>Place a teleporter one square away from a wall with a champion portrait. The teleporter should move the party to a location with a fake wall right in front and no walls on all other squares visible in the dungeon view. The fake wall must allow random ornaments.</li>
<li>In the game, move to face the portrait on the wall.</li>
<li>Move one step backward. The party is teleported in front of the fake wall. A champion portrait is still visible (without the mirror) and is changed for each refresh of the dungeon view until the game crashes:<br/><img src="IMAGES/BUG0_75.png" alt=""/></li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>DUNGEON.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h3><a name="BUG0_76">BUG0_76</a></h3>
<dl><dt>Symptom</dt>
<dd>The same text is drawn on multiple sides of a wall square.</dd>
<dt>Cause</dt>
<dd>The engine stores only a single text to draw on a wall in a global variable. Even if different texts are placed on differents sides of the wall, the same text is drawn on each affected side.<br/>
How to reproduce:
<ol><li>Create a custom dungeon.</li>
<li>Place two different texts on two different sides of a wall square.</li>
<li>In the game, move to face each side of the wall.</li>
<li>The same text is visible on both sides.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.0a EN, 1.0b EN, 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>DUNGEON.C</dd>
<dt>Resolution</dt>
<dd>None.</dd></dl>
<h2><a name="Bugs2">Bugs introduced in DM for Atari ST 1.1 EN (1)</a></h2>
<h3><a name="BUG2_00">BUG2_00</a></h3>
<dl><dt>Symptom</dt>
<dd>The closed scroll icon is drawn when the scroll is open.</dd>
<dt>Cause</dt>
<dd>If you open the inventory of a champion and place a scroll in the action hand, the closed scroll icon is drawn instead of the open scroll icon. If you put another scroll in the action hand of another champion (in the status box on top of the screen) the icon is changed to the open scroll icon. If a champion in the party has a lit torch in hand then if you wait long enough without doing anything until the torch light decreases then the scroll icon changes automatically to the open scroll icon. The code added to fix <a name="BUG0_35">BUG0_35</a> about chest icons also affects scrolls while it should not.<br/>
How to reproduce:
<ol><li>Put a torch in the ready hand of any champion in the party.</li>
<li>Open the inventory of the champion.</li>
<li>Put a scroll in the action hand. The closed scroll icon is drawn even though the scroll text is drawn in the panel.<br/>
<img src="IMAGES/BUG2_00.png" alt=""/></li>
<li>Wait without doing anything. After some time (less than 2 minutes), the open scroll icon is drawn and replaces the closed scroll icon.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.1 EN, 1.2 EN, 1.2 GE, 1.3a FR, 1.3b FR and CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h2><a name="Bugs5">Bugs introduced in DM for Atari ST 1.3a FR (1)</a></h2>
<h3><a name="BUG5_00">BUG5_00</a></h3>
<dl><dt>Symptom</dt>
<dd>When looking at a champion's dead bones by pressing the eye, the name in the panel only contains the champion name and the object name is missing. The correct name that includes both the champion name and the object name is visible when holding the bones in hand.</dd>
<dt>Cause</dt>
<dd>In the source code, two function calls were swapped while translating the game to French in order to change the order of words in the final string. However, only the strings should have been swapped and not the function calls.<br/>
How to reproduce:
<ol><li>Kill one champion in the party, for example by bumping in a wall or casting fireballs.</li>
<li>Grab the champion dead bones and check the name of the object in hand.</li>
<li>Open the inventory of a champion and click on the eye.</li>
<li>Check the name in the panel.</li></ol></dd>
<dt>Affected versions</dt>
<dd>DM for Atari ST 1.3a FR, 1.3b FR</dd>
<dt>Affected files</dt>
<dd>INVNTORY.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h2><a name="Bugs7">Bugs introduced in CSB for Atari ST 2.0 EN (2)</a></h2>
<h3><a name="BUG7_00">BUG7_00</a></h3>
<dl><dt>Symptom</dt>
<dd>When holding a champion's dead bones in hand, a space character is missing between the champion name and the object name. The correct name with a space character is visible in the panel when looking at the bones by pressing the eye.</dd>
<dt>Cause</dt>
<dd>In the source code, the addition of a space character between the two strings is missing.<br/>
How to reproduce:
<ol><li>Kill one champion in the party, for example by bumping in a wall or casting fireballs.</li>
<li>Grab the champion dead bones and check the name of the object in hand.</li>
<li>Open the inventory of a champion and click on the eye.</li>
<li>Check the name in the panel.</li></ol></dd>
<dt>Affected versions</dt>
<dd>CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>OBJECT.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h3><a name="BUG7_01">BUG7_01</a></h3>
<dl><dt>Symptom</dt>
<dd>Some creatures may be drawn with unexpected colors in Chaos Strikes Back.</dd>
<dt>Cause</dt>
<dd>In the color palettes used to draw the dungeon view, two colors (9 and 10) are only used by creature graphics and each creature type can specify replacement colors to use instead of the default colors. Creature types that do not use these colors can specify that no replacement is needed. Each map in the dungeon has an associated list of allowed creature types. If multiple creatures with conflicting color replacements are allowed on the same map then each replacement color is defined by the creature type that appears the last in the list of allowed creature types. There are such conflicts in Chaos Strikes Back for 'Worm' which are never drawn with their 'true' colors.<br/>
All bitmaps for 'Slime Devil' use both colors 9 and 10 but replacement is only specified for color 10. On the map where this creature is used, there are no other creatures defining color 9 so the default color is used which is appropriate. However, this color should be explicitly specified.<br/>
The front, side and attack bitmaps for 'Lord Chaos' use both colors 9 and 10 but no replacements are specified. On the map where this creature is used, the colors defined by the Demon are used, which are also appropriate for Lord Chaos. However, these colors should be explicitly specified.<br/>
All bitmaps for 'Hellhound' do not use colors 9 and 10 but it specifies replacements for both, inherited from 'Pain Rat' (DM). On the map where this creature is used, none of the creatures use colors 9 and 10 so this has no consequence. However, these colors should not be specified.<br/>
All bitmaps for 'Worm' use both colors 9 and 10 and specify replacements for both colors 9 and 10 but these replacements are still for 'Magenta Worm' (DM). In the game, the actual colors used are not the same on all maps where they are present: on map 0 the colors are defined by 'Demon', on map 9 the colors are defined by 'Dragon' (same colors as 'Demon') and on map 4 color 9 is defined by 'Giant Scorpion' and color 10 is defined by 'Flying Eye'.<br/>
The front, side and attack bitmaps for 'Zytaz' use both colors 9 and 10 and specify replacements for both colors 9 and 10 but the replacements are still for the 'Materializer' (DM). They appear with other (and correct) colors in the game only because they were defined by 'Demon'. However, these colors should be explicitly specified.<br/>
How to reproduce:
<ol><li>For 'Worm', create a custom dungeon, add this creature as the last allowed creature type on a map. When playing the game, they will be drawn with the wrong colors that it specifies.<br/>
The Worm is the only creature that is intended to be drawn with different colors on different maps (the creature was redrawn compared to worms in Dungeon Master). In Chaos Strikes Back go to maps 0, 4 and 9 to see that their colors are different on each map:<br/>
<img src="IMAGES/BUG7_01_1.png" alt=""/> <img src="IMAGES/BUG7_01_2.png" alt=""/> <img src="IMAGES/BUG7_01_3.png" alt=""/></li>
<li>For 'Slime Devil' and 'Lord Chaos' create a custom dungeon, add a creature that replaces colors 9 and 10 and then add one of these creature in the list of allowed creatures. When playing the game, the colors of the first creature will be used instead of the expected colors.</li>
<li>For 'Hellhound', create a custom dungeon, add other creatures that use colors 9 or 10 before it in the list of allowed creature types. When playing the game, the other creatures will be drawn with the replacement colors defined by 'Hellhound'.</li>
<li>For 'Zytaz', create a custom dungeon, add this creature as the last allowed creature type on a map. When playing the game, they will be drawn with the wrong colors that it specifies.</li></ol></dd>
<dt>Affected versions</dt>
<dd>CSB for Atari ST 2.0 EN, 2.1 EN</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd>
<dt>Resolution</dt>
<dd>None</dd></dl>
<h1><a name="Changes">Changes (115)</a></h1>
<h2><a name="Changes1">Changes introduced in DM for Atari ST 1.0b EN (3)</a></h2>
<h3><a name="CHANGE1_00_OPTIMIZATION">CHANGE1_00_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Variable or constant replaced.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C</dd></dl>
<h3><a name="CHANGE1_01_IMPROVEMENT">CHANGE1_01_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Engine version 1.0 printed in top right corner of dialog boxes.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C</dd></dl>
<h3><a name="CHANGE1_02_FIX">CHANGE1_02_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_57">BUG0_57</a>.</dd>
<dt>Affected files</dt>
<dd>STARTND2.C</dd></dl>
<h2><a name="Changes2">Changes introduced in DM for Atari ST 1.1 EN (21)</a></h2>
<h3><a name="CHANGE2_00_IMPROVEMENT">CHANGE2_00_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Status variables for COPYPROTECTIONF are now reset each time a game is restarted.</dd>
<dt>Affected files</dt>
<dd></dd></dl>
<h3><a name="CHANGE2_01_OPTIMIZATION">CHANGE2_01_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Inline code replaced by function calls.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, COMMAND.C, DUNGEON.C, DUNVIEW.C, GROUP1.C, GROUP2.C, MENUS.C, MOVE.C, PROJEXPL.C, TIMELINE.C</dd></dl>
<h3><a name="CHANGE2_02_FIX">CHANGE2_02_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_07">BUG0_07</a>.</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd></dl>
<h3><a name="CHANGE2_03_FIX">CHANGE2_03_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_15">BUG0_15</a>.</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd></dl>
<h3><a name="CHANGE2_04_IMPROVEMENT">CHANGE2_04_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Keys cannot pass through a closed door anymore. In previous versions, this could prevent the player from completing the game when throwing a required key through a locked door.</dd>
<dt>Affected files</dt>
<dd>PROJEXPL.C</dd></dl>
<h3><a name="CHANGE2_05_FIX">CHANGE2_05_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_61">BUG0_61</a>.</dd>
<dt>Affected files</dt>
<dd>START.C, TIMELINE.C</dd></dl>
<h3><a name="CHANGE2_06_FIX">CHANGE2_06_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_00">BUG0_00</a>.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, MENUS.C, TIMELINE.C</dd></dl>
<h3><a name="CHANGE2_07_FIX">CHANGE2_07_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_24">BUG0_24</a>.</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd></dl>
<h3><a name="CHANGE2_08_FIX">CHANGE2_08_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_33">BUG0_33</a>.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd></dl>
<h3><a name="CHANGE2_09_OPTIMIZATION">CHANGE2_09_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Code deduplication.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, COMMAND.C, MENUS.C</dd></dl>
<h3><a name="CHANGE2_10_FIX">CHANGE2_10_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_35">BUG0_35</a>.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd></dl>
<h3><a name="CHANGE2_11_OPTIMIZATION">CHANGE2_11_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Machine code size reduced.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd></dl>
<h3><a name="CHANGE2_12_OPTIMIZATION">CHANGE2_12_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Variable definition changed.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, INVNTORY.C</dd></dl>
<h3><a name="CHANGE2_13_OPTIMIZATION">CHANGE2_13_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Function call replaced by an equivalent and smaller call.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd></dl>
<h3><a name="CHANGE2_14_IMPROVEMENT">CHANGE2_14_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>The maximum possible value for statistics is now 250 instead of 255 after drinking a Ros Potion (Dexterity), a Ku Potion (Strength), a Dane Potion (Wisdom) or a Neta Potion (Vitality). The effectiveness of these potions is halved when the statistic value is above 120 and halved again when it is above 180.</dd>
<dt>Affected files</dt>
<dd>INVNTORY.C</dd></dl>
<h3><a name="CHANGE2_15_FIX">CHANGE2_15_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_53">BUG0_53</a>.</dd>
<dt>Affected files</dt>
<dd>COMMAND.C</dd></dl>
<h3><a name="CHANGE2_16_IMPROVEMENT">CHANGE2_16_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>The delay before another action can be performed after a melee action fails is halved.</dd>
<dt>Affected files</dt>
<dd>MENUS.C</dd></dl>
<h3><a name="CHANGE2_17_IMPROVEMENT">CHANGE2_17_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Heal action is much more effective.</dd>
<dt>Affected files</dt>
<dd>MENUS.C</dd></dl>
<h3><a name="CHANGE2_18_IMPROVEMENT">CHANGE2_18_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Engine version 1.1 printed in top right corner of dialog boxes.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C</dd></dl>
<h3><a name="CHANGE2_19_FIX">CHANGE2_19_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_58">BUG0_58</a>.</dd>
<dt>Affected files</dt>
<dd>STARTND2.C</dd></dl>
<h3><a name="CHANGE2_20_FIX">CHANGE2_20_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_59">BUG0_59</a>.</dd>
<dt>Affected files</dt>
<dd>STARTND2.C</dd></dl>
<h2><a name="Changes3">Changes introduced in DM for Atari ST 1.2 EN (21)</a></h2>
<h3><a name="CHANGE3_00_IMPROVEMENT">CHANGE3_00_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Faster regeneration of Mana, Stamina and Health (particularly when sleeping) and faster convergence of current statistic values back to their maximum values if they are temporarily above their maximum value.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, MAIN.C</dd></dl>
<h3><a name="CHANGE3_01_OPTIMIZATION">CHANGE3_01_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Source code of some functions converted from C language to assembly language for better performance and smaller machine code size.</dd>
<dt>Affected files</dt>
<dd>MAIN.C, TIMELINE.C</dd></dl>
<h3><a name="CHANGE3_02_OPTIMIZATION">CHANGE3_02_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Inline code replaced by function calls.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, DUNGEON.C, DUNVIEW.C, GROUP1.C, TIMELINE.C</dd></dl>
<h3><a name="CHANGE3_03_IMPROVEMENT">CHANGE3_03_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Group movements are greatly slowed down on maps far from the party to improve the overall game performance (less events to process).</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd></dl>
<h3><a name="CHANGE3_04_FIX">CHANGE3_04_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_14">BUG0_14</a>.</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd></dl>
<h3><a name="CHANGE3_05_FIX">CHANGE3_05_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_18">BUG0_18</a>.</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd></dl>
<h3><a name="CHANGE3_06_FIX">CHANGE3_06_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_27">BUG0_27</a>.</dd>
<dt>Affected files</dt>
<dd>MOVE.C</dd></dl>
<h3><a name="CHANGE3_07_FIX">CHANGE3_07_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_36">BUG0_36</a>.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd></dl>
<h3><a name="CHANGE3_08_OPTIMIZATION">CHANGE3_08_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Trailing space characters removed from strings.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, INVNTORY.C</dd></dl>
<h3><a name="CHANGE3_09_FIX">CHANGE3_09_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_40">BUG0_40</a>.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd></dl>
<h3><a name="CHANGE3_10_FIX">CHANGE3_10_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_42">BUG0_42</a>.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, START.C</dd></dl>
<h3><a name="CHANGE3_11_OPTIMIZATION">CHANGE3_11_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Code deduplication.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd></dl>
<h3><a name="CHANGE3_12_FIX">CHANGE3_12_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_44">BUG0_44</a>.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd></dl>
<h3><a name="CHANGE3_13_IMPROVEMENT">CHANGE3_13_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>The maximum possible value for statistics is now 170 instead of 250 after drinking a Ros Potion (Dexterity), a Ku Potion (Strength), a Dane Potion (Wisdom) or a Neta Potion (Vitality). The effectiveness of these potions is halved when the statistic value is above 120 and halved again when it is above 150.</dd>
<dt>Affected files</dt>
<dd>INVNTORY.C</dd></dl>
<h3><a name="CHANGE3_14_FIX">CHANGE3_14_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_55">BUG0_55</a>.</dd>
<dt>Affected files</dt>
<dd>MENUS.C</dd></dl>
<h3><a name="CHANGE3_15_IMPROVEMENT">CHANGE3_15_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>A checksum is appended to dungeon data (in both dungeon files and saved game files) to improve reliability.</dd>
<dt>Affected files</dt>
<dd>SAVEUTIL.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE3_16_OPTIMIZATION">CHANGE3_16_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Variables reordered.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C</dd></dl>
<h3><a name="CHANGE3_17_IMPROVEMENT">CHANGE3_17_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>The game does not stop anymore and a dialog box with the message 'SAVED GAME DAMAGED!' is drawn if loading a saved game fails while restarting a game. The game still stops if the initial loading of a saved game fails.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE3_18_IMPROVEMENT">CHANGE3_18_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Engine version 1.2 printed in top right corner of dialog boxes.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C</dd></dl>
<h3><a name="CHANGE3_19_FIX">CHANGE3_19_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_00">BUG0_00</a>.</dd>
<dt>Affected files</dt>
<dd>STARTND2.C</dd></dl>
<h3><a name="CHANGE3_20_OPTIMIZATION">CHANGE3_20_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Removed support for two floppy disk drives in the function to detect if a floppy disk is write protected. This support is reintroduced in CSB for Atari ST 2.0.</dd>
<dt>Affected files</dt>
<dd>FLOPPY1.C, FLOPPY2.C</dd></dl>
<h2><a name="Changes4">Changes introduced in DM for Atari ST 1.2 GE (1)</a></h2>
<h3><a name="CHANGE4_00_LOCALIZATION">CHANGE4_00_LOCALIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Translation to German language.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, COMMAND.C, DIALOG.C, INVNTORY.C, MENUS.C, STARTND2.C, DEFS.H</dd></dl>
<h2><a name="Changes5">Changes introduced in DM for Atari ST 1.3a FR (7)</a></h2>
<h3><a name="CHANGE5_00_LOCALIZATION">CHANGE5_00_LOCALIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Translation to French language.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, COMMAND.C, DIALOG.C, INVNTORY.C, MENUS.C, OBJECT.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE5_01_FIX">CHANGE5_01_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_00">BUG0_00</a>.</dd>
<dt>Affected files</dt>
<dd>MOUSE.C</dd></dl>
<h3><a name="CHANGE5_02_FIX">CHANGE5_02_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_17">BUG0_17</a>.</dd>
<dt>Affected files</dt>
<dd>GROUP2.C</dd></dl>
<h3><a name="CHANGE5_03_IMPROVEMENT">CHANGE5_03_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>More characters are replaced by variants for scroll texts. This only includes a single quote character which is also added to the font graphic.</dd>
<dt>Affected files</dt>
<dd>INVNTORY.C</dd></dl>
<h3><a name="CHANGE5_04_IMPROVEMENT">CHANGE5_04_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Engine version 1.3 printed in top right corner of dialog boxes.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C</dd></dl>
<h3><a name="CHANGE5_05_IMPROVEMENT">CHANGE5_05_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>A dialog box with the message "Saving game..." is displayed while saving the game.</dd>
<dt>Affected files</dt>
<dd>STARTND2.C</dd></dl>
<h3><a name="CHANGE5_06_OPTIMIZATION">CHANGE5_06_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Use an existing blank global variable as a blank color palette instead of a dedicated local variable.</dd>
<dt>Affected files</dt>
<dd>STARTND2.C</dd></dl>
<h2><a name="Changes6">Changes introduced in DM for Atari ST 1.3b FR (1)</a></h2>
<h3><a name="CHANGE6_00_FIX">CHANGE6_00_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_56">BUG0_56</a>.</dd>
<dt>Affected files</dt>
<dd>MENUS.C</dd></dl>
<h2><a name="Changes7">Changes introduced in CSB for Atari ST 2.0 EN (40)</a></h2>
<h3><a name="CHANGE7_00_OPTIMIZATION">CHANGE7_00_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Increased sector 7 read buffer size to 1024 bytes instead of 512 bytes but only the first 512 bytes are used.</dd>
<dt>Affected files</dt>
<dd>MAIN.C, DEFS.H</dd></dl>
<h3><a name="CHANGE7_01_FIX">CHANGE7_01_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_03">BUG0_03</a>.</dd>
<dt>Affected files</dt>
<dd>MAIN.C</dd></dl>
<h3><a name="CHANGE7_02_FIX">CHANGE7_02_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_52">BUG0_52</a>.</dd>
<dt>Affected files</dt>
<dd>COMMAND.C, MAIN.C, MOUSE.C</dd></dl>
<h3><a name="CHANGE7_03_IMPROVEMENT">CHANGE7_03_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Support for two floppy disk drives.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C, FLOPPY1.C, FLOPPY2.C, MAIN.C, SAVEUTIL.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE7_04_IMPROVEMENT">CHANGE7_04_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Additional copy protection to check if fuzzy bits detection has been disabled in COPYPROTECTIONE.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, COPYPROT.C, DUNVIEW.C, INVNTORY.C, MAIN.C, TIMELINE.C, DEFS.H</dd></dl>
<h3><a name="CHANGE7_05_OPTIMIZATION">CHANGE7_05_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Refactored game initialization function.</dd>
<dt>Affected files</dt>
<dd>MAIN.C, MEMINIT.C, START.C</dd></dl>
<h3><a name="CHANGE7_06_OPTIMIZATION">CHANGE7_06_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>The Atari ST color palette register address is now specified with 32 bit instead of 24 bit (both addresses work fine).</dd>
<dt>Affected files</dt>
<dd>MAIN.C</dd></dl>
<h3><a name="CHANGE7_07_LOCALIZATION">CHANGE7_07_LOCALIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Translation to English language (differences with original Dungeon Master).</dd>
<dt>Affected files</dt>
<dd>DIALOG.C, MENUS.C, OBJECT.C</dd></dl>
<h3><a name="CHANGE7_08_OPTIMIZATION">CHANGE7_08_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Variable definitions changed.</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C, MEMINIT.C, SOUND.C, TIMELINE.C</dd></dl>
<h3><a name="CHANGE7_09_OPTIMIZATION">CHANGE7_09_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Variables reordered.</dd>
<dt>Affected files</dt>
<dd>MENUS.C, MOUSE.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE7_10_IMPROVEMENT">CHANGE7_10_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Additional copy protection to check if fuzzy bits detection has been disabled in COPYPROTECTIONF.</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd></dl>
<h3><a name="CHANGE7_11_OPTIMIZATION">CHANGE7_11_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Comma removed on many lines of source code where they separated two expressions in order to reduce the size of the machine code generated by the compiler.</dd>
<dt>Affected files</dt>
<dd>COMMAND.C, DUNGEON.C, DUNVIEW.C, GROUP1.C, GROUP2.C</dd></dl>
<h3><a name="CHANGE7_12_OPTIMIZATION">CHANGE7_12_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Use of another variable.</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd></dl>
<h3><a name="CHANGE7_13_OPTIMIZATION">CHANGE7_13_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Code moved and maximum number of loadable graphics updated.</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd></dl>
<h3><a name="CHANGE7_14_FIX">CHANGE7_14_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_00">BUG0_00</a>.</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C, INVNTORY.C, MEMINIT.C, SENSOR.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE7_15_OPTIMIZATION">CHANGE7_15_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>New function to draw walls in the center of the dungeon view without unnecessary transparency support for better performance.</dd>
<dt>Affected files</dt>
<dd>DUNVIEW.C</dd></dl>
<h3><a name="CHANGE7_16_OPTIMIZATION">CHANGE7_16_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Source code of some functions converted from C language to assembly language for better performance and smaller machine code size.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, DUNGEON.C, TIMELINE.C</dd></dl>
<h3><a name="CHANGE7_17_FIX">CHANGE7_17_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_09">BUG0_09</a>.</dd>
<dt>Affected files</dt>
<dd>DUNGEON.C</dd></dl>
<h3><a name="CHANGE7_18_FIX">CHANGE7_18_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_10">BUG0_10</a>.</dd>
<dt>Affected files</dt>
<dd>DUNGEON.C</dd></dl>
<h3><a name="CHANGE7_19_FIX">CHANGE7_19_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_69">BUG0_69</a>.</dd>
<dt>Affected files</dt>
<dd>GROUP1.C</dd></dl>
<h3><a name="CHANGE7_20_IMPROVEMENT">CHANGE7_20_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Projectiles now move at the same speed on all maps instead of moving slower on maps other than the party map.</dd>
<dt>Affected files</dt>
<dd>PROJEXPL.C</dd></dl>
<h3><a name="CHANGE7_21_IMPROVEMENT">CHANGE7_21_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>New floor sensor type: end game. The game ends immediately when this sensor is triggered.</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd></dl>
<h3><a name="CHANGE7_22_FIX">CHANGE7_22_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_22">BUG0_22</a>.</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd></dl>
<h3><a name="CHANGE7_23_IMPROVEMENT">CHANGE7_23_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>New floor sensor type: version checker. This sensor is triggered only if its data value is smaller than or equal to the game engine version. This sensor type is not used in the original dungeon.</dd>
<dt>Affected files</dt>
<dd>SENSOR.C</dd></dl>
<h3><a name="CHANGE7_24_IMPROVEMENT">CHANGE7_24_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>New reincarnation rules: Health, Mana and Stamina values are halved. The current and maximum values of each statistic except Luck are decreased by 1/8th of their value without going below their minimum value.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd></dl>
<h3><a name="CHANGE7_25_FIX">CHANGE7_25_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_37">BUG0_37</a>.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd></dl>
<h3><a name="CHANGE7_26_OPTIMIZATION">CHANGE7_26_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Code deduplication.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C, MENUS.C</dd></dl>
<h3><a name="CHANGE7_27_FIX">CHANGE7_27_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_48">BUG0_48</a>.</dd>
<dt>Affected files</dt>
<dd>INVNTORY.C</dd></dl>
<h3><a name="CHANGE7_28_IMPROVEMENT">CHANGE7_28_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>The player can now left click on the champion bars to open their inventory.</dd>
<dt>Affected files</dt>
<dd>COMMAND.C, DEFS.H</dd></dl>
<h3><a name="CHANGE7_29_IMPROVEMENT">CHANGE7_29_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>New saved game header format.</dd>
<dt>Affected files</dt>
<dd>SAVEUTIL.C, STARTND1.C, STARTND2.C, DEFS.H</dd></dl>
<h3><a name="CHANGE7_30_IMPROVEMENT">CHANGE7_30_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Added support for compressed dungeons. This includes a new type of temporary memory allocation used ony for that purpose.</dd>
<dt>Affected files</dt>
<dd>FLOPPY2.C, MEMORY.C, SAVEUTIL.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE7_31_IMPROVEMENT">CHANGE7_31_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Refactored floppy disk format function with these new features: New dialog message if there is no floppy disk in the drive. New dialog message while formatting and if formatting failed, asks for confirmation if trying to format an existing save disk. Code to format floppy disk moved to a separate function.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C, FLOPPY2.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE7_32_IMPROVEMENT">CHANGE7_32_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Refactored load game function with these new features: New dialog message if there is no floppy disk in the drive. New dialog message while the game is loading.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE7_33_IMPROVEMENT">CHANGE7_33_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Refactored save game function with these new features: New dialog message if there is no floppy disk in the drive. If you choose 'FORMAT FLOPPY' and then choose 'CANCEL' then you come back to the save dialog instead of closing the save dialog and coming back to the inventory. The assembly code for the copy protection uses custom routines to read sector 7 instead of calling XBIOS function Floprd().</dd>
<dt>Affected files</dt>
<dd>DIALOG.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE7_34_OPTIMIZATION">CHANGE7_34_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Function calls to show and hide the mouse pointer on screen are now included in the function to get the player's choice in dialogs.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C, START.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE7_35_IMPROVEMENT">CHANGE7_35_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>If a text message in a dialog is too long then it is split and printed on two lines.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C</dd></dl>
<h3><a name="CHANGE7_36_IMPROVEMENT">CHANGE7_36_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Engine version 2.0 printed in top right corner of dialog boxes.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C</dd></dl>
<h3><a name="CHANGE7_37_IMPROVEMENT">CHANGE7_37_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Restart experience improved: the game waits a longer time for the player to click on the 'Restart this game' button before drawing the credits and restart is now possible even after the credits have been drawn by pressing a key or clicking a mouse button.</dd>
<dt>Affected files</dt>
<dd>STARTND2.C</dd></dl>
<h3><a name="CHANGE7_38_OPTIMIZATION">CHANGE7_38_OPTIMIZATION</a></h3>
<dl><dt>Description</dt>
<dd>Function call replaced by an equivalent call.</dd>
<dt>Affected files</dt>
<dd>START.C</dd></dl>
<h3><a name="CHANGE7_39_FIX">CHANGE7_39_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_62">BUG0_62</a>.</dd>
<dt>Affected files</dt>
<dd>START.C</dd></dl>
<h2><a name="Changes8">Changes introduced in CSB for Atari ST 2.1 EN (14)</a></h2>
<h3><a name="CHANGE8_00_FIX">CHANGE8_00_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_16">BUG0_16</a>.</dd>
<dt>Affected files</dt>
<dd>PROJEXPL.C</dd></dl>
<h3><a name="CHANGE8_01_FIX">CHANGE8_01_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_21">BUG0_21</a>.</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd></dl>
<h3><a name="CHANGE8_02_IMPROVEMENT">CHANGE8_02_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>The end game sensor now includes an optional delay before drawing the end of the game (not used in the original dungeon).</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd></dl>
<h3><a name="CHANGE8_03_FIX">CHANGE8_03_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_25">BUG0_25</a>.</dd>
<dt>Affected files</dt>
<dd>TIMELINE.C</dd></dl>
<h3><a name="CHANGE8_04_FIX">CHANGE8_04_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_28">BUG0_28</a>.</dd>
<dt>Affected files</dt>
<dd>MOVE.C</dd></dl>
<h3><a name="CHANGE8_05_FIX">CHANGE8_05_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_31">BUG0_31</a>.</dd>
<dt>Affected files</dt>
<dd>SENSOR.C</dd></dl>
<h3><a name="CHANGE8_06_IMPROVEMENT">CHANGE8_06_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>The hard coded game engine version for the version checker sensor is now 21 for version 2.1.</dd>
<dt>Affected files</dt>
<dd>SENSOR.C</dd></dl>
<h3><a name="CHANGE8_07_FIX">CHANGE8_07_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_46">BUG0_46</a>.</dd>
<dt>Affected files</dt>
<dd>CHAMPION.C</dd></dl>
<h3><a name="CHANGE8_08_FIX">CHANGE8_08_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_12">BUG0_12</a>.</dd>
<dt>Affected files</dt>
<dd>INVNTORY.C</dd></dl>
<h3><a name="CHANGE8_09_FIX">CHANGE8_09_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_12">BUG0_12</a>.</dd>
<dt>Affected files</dt>
<dd>INVNTORY.C, START.C</dd></dl>
<h3><a name="CHANGE8_10_FIX">CHANGE8_10_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_50">BUG0_50</a>.</dd>
<dt>Affected files</dt>
<dd>COMMAND.C</dd></dl>
<h3><a name="CHANGE8_11_FIX">CHANGE8_11_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_51">BUG0_51</a>.</dd>
<dt>Affected files</dt>
<dd>COMMAND.C</dd></dl>
<h3><a name="CHANGE8_12_FIX">CHANGE8_12_FIX</a></h3>
<dl><dt>Description</dt>
<dd>See <a href="#BUG0_12">BUG0_12</a>.</dd>
<dt>Affected files</dt>
<dd>SAVEUTIL.C, STARTND2.C</dd></dl>
<h3><a name="CHANGE8_13_IMPROVEMENT">CHANGE8_13_IMPROVEMENT</a></h3>
<dl><dt>Description</dt>
<dd>Engine version 2.1 printed in top right corner of dialog boxes.</dd>
<dt>Affected files</dt>
<dd>DIALOG.C</dd></dl>
</body>
</html>